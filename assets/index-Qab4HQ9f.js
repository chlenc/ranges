const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/native-Bi5qYUKS.js","assets/index-MjOix_bB.js","assets/index-B-egoCnV.css"])))=>i.map(i=>d[i]);
import{a_ as dt,a$ as lt,b0 as Ns,b1 as Us,b2 as Bt,b3 as U,aX as j,o as Lt,aw as ee,aS as We,e as kt,b4 as D,b5 as se,n as V,I as $,b6 as ve,b7 as Pe,b8 as Mt,B as Se,b9 as Ds,aV as Ke,a3 as B,ba as zs,bb as Gs,bc as Vs,bd as qt,be as Ot,u as p,m as ae,bf as z,bg as Ft,bh as Ht,bi as jt,bj as Je,bk as Ye,a5 as K,al as xe,bl as Nt,M as Q,bm as De,h as w,bn as $s,bo as Ws,bp as he,bq as ft,br as Ks,bs as Ut,bt as Dt,bu as Js,bv as te,ae as Ys,bw as ze,a6 as Qe,bx as Qs,aY as Xe,by as Xs,bz as ne,ac as zt,ad as Gt,bA as Zs,i as Te,bB as Vt,bC as X,a2 as T,bD as Ge,bE as Ze,bF as $t,bG as Wt,V as et,W as ea,bH as Kt,bI as Jt,Q as re,N as Ie,_ as ta,O as Yt,R as H,S as Qt,bJ as Xt,bK as Zt,bL as es,$ as ts,bM as ss,ay as sa,bN as aa,bO as na,bP as ra,bQ as oa,bR as ia,aJ as tt,bS as ca,Z as ua,X as da,bT as as,c as ns,bU as rs,bV as os,bW as Ve,bX as is,bY as cs,ab as us,bZ as la,b_ as fa,b$ as ha,c0 as ma,c1 as ga,A as pa,c2 as ya,c3 as ba,c4 as wa,c5 as _a,c6 as xa,c7 as Ea,c8 as va,c9 as Pa,ca as Sa,cb as Ta,cc as Ia,a1 as Ca,cd as Aa,ce as Ra,cf as Ba,x as La,cg as ka,ch as Ma,ci as qa,D as Oa,C as Fa,cj as Ha,ck as ja,aE as Na,aD as Ua,aC as Da,cl as za,cm as Ga,cn as Va,co as $a,cp as Wa,cq as Ka,cr as Ja,cs as Ya,ct as Qa,E as Xa,cu as Za,cv as en,cw as tn,H as sn,cx as an,cy as nn,cz as rn,cA as on,cB as cn,cC as un,cD as dn,cE as ln,cF as fn,cG as hn,cH as mn,cI as gn,cJ as pn,cK as yn,cL as bn,cM as wn,cN as _n,cO as xn,cP as En,cQ as vn,cR as Pn,cS as Sn,cT as Tn,cU as In,cV as Cn,cW as An,cX as Rn,cY as Bn,cZ as Ln,c_ as kn,c$ as Mn,d0 as qn,d1 as On,d2 as Fn,d3 as Hn,d4 as jn,d5 as Nn,d6 as Un,d7 as Dn,d8 as zn,d9 as Gn,da as Vn,db as $n,dc as Wn,dd as Kn,de as Jn,df as Yn,dg as Qn,dh as Xn,J as Zn,di as er,dj as tr,T as sr,dk as ar,dl as nr,dm as rr,G as or,dn as ir,dp as cr,dq as ur,dr,a0 as lr,z as fr,ds as hr,U as mr,dt as gr,du as pr,r as yr,dv as br,dw as wr,dx as _r,dy as xr,dz as Er,dA as vr,aR as Pr,dB as Sr,d as Tr,dC as Ir,aU as Cr,dD as Ar,dE as Rr,aQ as Br,dF as Lr,dG as kr,dH as Mr,dI as qr,dJ as Or,dK as Fr,f as Hr,dL as jr,dM as Nr,dN as Ur,dO as Dr,aZ as zr,dP as Gr,dQ as Vr,dR as ht,dS as mt,dT as $r,dU as Wr,dV as Kr,dW as Jr,aB as Yr,aH as Qr,dX as Xr,aI as Zr,ag as eo,dY as to,dZ as so,d_ as ao,d$ as no,e0 as gt,e1 as me,e2 as pt,e3 as ro,e4 as oo,e5 as io,e6 as co,aW as uo,ak as lo,e7 as fo,e8 as ho,e9 as mo,ea as go,eb as po,ec as yo,ed as bo,ee as wo,ef as _o,eg as xo,eh as Eo,ei as vo,ej as Po,ek as So,el as To,em as Io,en as Co,eo as Ao,ep as Ro,eq as Bo,er as Lo,es as ko,et as Mo,eu as qo,ev as Oo,ew as Fo,ex as Ho,ey as jo,ez as No,eA as Uo,eB as Do,eC as zo,eD as Go,eE as Vo,eF as $o,eG as Wo,eH as Ko,eI as Jo,eJ as Yo,eK as Qo,eL as Xo,eM as Zo,eN as ei,eO as ti,eP as si,eQ as ai,eR as ni,eS as ri,eT as oi,eU as ii,eV as ci,eW as ui,eX as di,eY as li,eZ as fi,e_ as hi,e$ as mi,f0 as gi,f1 as pi,f2 as yi,f3 as bi,f4 as wi,f5 as _i,f6 as xi,f7 as Ei,f8 as vi,f9 as Pi,fa as Si,fb as Ti,fc as Ii,fd as Ci,fe as Ai,ff as Ri,fg as Bi,fh as Li,fi as ki,fj as Mi,fk as qi,fl as Oi,fm as Fi,fn as Hi,fo as ji,fp as Ni,fq as Ui,fr as Di,fs as zi,ft as Gi,fu as Vi,fv as $i,fw as Wi,fx as Ki,fy as Ji,fz as Yi,fA as Qi,fB as Xi,fC as Zi,fD as ec,fE as tc,fF as sc,fG as ac,az as nc,fH as rc,fI as oc,fJ as ic,fK as cc,fL as uc,fM as dc,fN as lc,fO as fc,fP as hc,fQ as yt,fR as mc,fS as gc,fT as pc,aT as yc,q as bc,s as wc,fU as _c,fV as bt,fW as xc,fX as Ec,fY as vc,fZ as Pc,aa as Sc,f_ as Tc,af as C,am as Ic,ai as Cc,k as Ac}from"./index-MjOix_bB.js";import{d as Rc}from"./index-DpJFq4xu.js";import{b as Bc,d as st,p as ds,f as ls,w as Lc,g as kc,h as Mc,B as qc,W as Oc,c as Fc,e as Hc,a as wt,n as jc,s as Nc,z as Uc}from"./parseSignature-Br1IgqFH.js";import{f as Dc,s as zc}from"./fallback-CcyCN-Qp.js";import{ccipRequest as _t,offchainLookup as Gc,offchainLookupAbiItem as Vc,offchainLookupSignature as $c}from"./ccip-BHTbhuOJ.js";function Wc(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(a,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Kc(e){let t;if(typeof e=="string")t=dt(e,{modifiers:lt});else{const s=Ns(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(!Us(r)){t=dt(r,{modifiers:lt,structs:s});break}}}if(!t)throw new Bt({param:e});return t}function $e(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Jc(e){return e.opcode==="CREATE2"?hs(e):fs(e)}function fs(e){const t=U(j(e.from));let s=U(e.nonce);return s[0]===0&&(s=new Uint8Array([])),j(`0x${ee(D([t,s],"bytes")).slice(26)}`)}function hs(e){const t=U(j(e.from)),s=Lt($e(e.salt)?e.salt:U(e.salt),{size:32}),a="bytecodeHash"in e?$e(e.bytecodeHash)?e.bytecodeHash:U(e.bytecodeHash):ee(e.bytecode,"bytes");return j(We(ee(kt([U("0xff"),t,s,a])),12))}function ms(e){const{authorizationList:t}=e;if(t)for(const s of t){const{chainId:a}=s,n=s.address;if(!V(n))throw new $({address:n});if(a<0)throw new se({chainId:a})}oe(e)}function gs(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Ds;for(const s of t){const a=Ke(s),n=B(We(s,0,1));if(a!==32)throw new zs({hash:s,size:a});if(n!==Gs)throw new Vs({hash:s,version:n})}}oe(e)}function oe(e){const{chainId:t,maxPriorityFeePerGas:s,maxFeePerGas:a,to:n}=e;if(t<=0)throw new se({chainId:t});if(n&&!V(n))throw new $({address:n});if(a&&a>ve)throw new Pe({maxFeePerGas:a});if(s&&a&&s>a)throw new Mt({maxFeePerGas:a,maxPriorityFeePerGas:s})}function at(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(t<=0)throw new se({chainId:t});if(r&&!V(r))throw new $({address:r});if(s||n)throw new Se("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(a&&a>ve)throw new Pe({maxFeePerGas:a})}function nt(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(r&&!V(r))throw new $({address:r});if(typeof t<"u"&&t<=0)throw new se({chainId:t});if(s||n)throw new Se("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(a&&a>ve)throw new Pe({maxFeePerGas:a})}function ie(e){if(!e||e.length===0)return[];const t=[];for(let s=0;s<e.length;s++){const{address:a,storageKeys:n}=e[s];for(let r=0;r<n.length;r++)if(n[r].length-2!==64)throw new qt({storageKey:n[r]});if(!V(a,{strict:!1}))throw new $({address:a});t.push([a,n])}return t}function ps(e,t){const s=Ot(e);return s==="eip1559"?Xc(e,t):s==="eip2930"?Zc(e,t):s==="eip4844"?Qc(e,t):s==="eip7702"?Yc(e,t):eu(e,t)}function Yc(e,t){const{authorizationList:s,chainId:a,gas:n,nonce:r,to:o,value:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;ms(e);const h=ie(l),d=tu(s);return ae(["0x04",D([p(a),r?p(r):"0x",u?p(u):"0x",i?p(i):"0x",n?p(n):"0x",o??"0x",c?p(c):"0x",f??"0x",h,d,...ce(e,t)])])}function Qc(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:o,maxFeePerBlobGas:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;gs(e);let h=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof d>"u")){const x=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(E=>z(E)),A=e.kzg,v=Ft({blobs:x,kzg:A});if(typeof h>"u"&&(h=Ht({commitments:v})),typeof d>"u"){const E=jt({blobs:x,commitments:v,kzg:A});d=Je({blobs:x,commitments:v,proofs:E})}}const m=ie(l),g=[p(s),n?p(n):"0x",u?p(u):"0x",i?p(i):"0x",a?p(a):"0x",r??"0x",o?p(o):"0x",f??"0x",m,c?p(c):"0x",h??[],...ce(e,t)],y=[],_=[],b=[];if(d)for(let x=0;x<d.length;x++){const{blob:A,commitment:v,proof:E}=d[x];y.push(A),_.push(v),b.push(E)}return ae(["0x03",d?D([g,y,_,b]):D(g)])}function Xc(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:o,maxFeePerGas:c,maxPriorityFeePerGas:i,accessList:u,data:l}=e;oe(e);const f=ie(u),h=[p(s),n?p(n):"0x",i?p(i):"0x",c?p(c):"0x",a?p(a):"0x",r??"0x",o?p(o):"0x",l??"0x",f,...ce(e,t)];return ae(["0x02",D(h)])}function Zc(e,t){const{chainId:s,gas:a,data:n,nonce:r,to:o,value:c,accessList:i,gasPrice:u}=e;at(e);const l=ie(i),f=[p(s),r?p(r):"0x",u?p(u):"0x",a?p(a):"0x",o??"0x",c?p(c):"0x",n??"0x",l,...ce(e,t)];return ae(["0x01",D(f)])}function eu(e,t){const{chainId:s=0,gas:a,data:n,nonce:r,to:o,value:c,gasPrice:i}=e;nt(e);let u=[r?p(r):"0x",i?p(i):"0x",a?p(a):"0x",o??"0x",c?p(c):"0x",n??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(s>0)return BigInt(s*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new Ye({v:t.v});return d})(),f=K(t.r),h=K(t.s);u=[...u,p(l),f==="0x00"?"0x":f,h==="0x00"?"0x":h]}else s>0&&(u=[...u,p(s),"0x","0x"]);return D(u)}function ce(e,t){const s=t??e,{v:a,yParity:n}=s;if(typeof s.r>"u")return[];if(typeof s.s>"u")return[];if(typeof a>"u"&&typeof n>"u")return[];const r=K(s.r),o=K(s.s);return[typeof n=="number"?n?p(1):"0x":a===0n?"0x":a===1n?p(1):a===27n?"0x":p(1),r==="0x00"?"0x":r,o==="0x00"?"0x":o]}function tu(e){if(!e||e.length===0)return[];const t=[];for(const s of e){const{chainId:a,nonce:n,...r}=s,o=s.address;t.push([a?xe(a):"0x",o,n?xe(n):"0x",...ce({},r)])}return t}function su({chains:e,id:t}){return e.find(s=>s.id===t)}function rt(e,t="hex"){const s=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new Nt(e);return Q(e)}return e})(),a=De(s,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ys(a,t)}function ys(e,t="hex"){if(e.bytes.length===0)return t==="hex"?z(e.bytes):e.bytes;const s=e.readByte();if(s<128&&e.decrementPosition(1),s<192){const n=xt(e,s,128),r=e.readBytes(n);return t==="hex"?z(r):r}const a=xt(e,s,192);return au(e,a,t)}function xt(e,t,s){if(s===128&&t<128)return 1;if(t<=s+55)return t-s;if(t===s+55+1)return e.readUint8();if(t===s+55+2)return e.readUint16();if(t===s+55+3)return e.readUint24();if(t===s+55+4)return e.readUint32();throw new Se("Invalid RLP prefix")}function au(e,t,s){const a=e.position,n=[];for(;e.position-a<t;)n.push(ys(e,s));return n}function bs(e){return w(e)&&Ke(e)===32}const nu=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ws=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),ru=ws.map(e=>(9*e+5)%16),_s=(()=>{const s=[[ws],[ru]];for(let a=0;a<4;a++)for(let n of s)n.push(n[a].map(r=>nu[r]));return s})(),xs=_s[0],Es=_s[1],vs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),ou=xs.map((e,t)=>e.map(s=>vs[t][s])),iu=Es.map((e,t)=>e.map(s=>vs[t][s])),cu=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),uu=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function Et(e,t,s,a){return e===0?t^s^a:e===1?t&s|~t&a:e===2?(t|~s)^a:e===3?t&a|s&~a:t^(s|~a)}const ge=new Uint32Array(16);class du extends Ws{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:s,h2:a,h3:n,h4:r}=this;return[t,s,a,n,r]}set(t,s,a,n,r){this.h0=t|0,this.h1=s|0,this.h2=a|0,this.h3=n|0,this.h4=r|0}process(t,s){for(let d=0;d<16;d++,s+=4)ge[d]=t.getUint32(s,!0);let a=this.h0|0,n=a,r=this.h1|0,o=r,c=this.h2|0,i=c,u=this.h3|0,l=u,f=this.h4|0,h=f;for(let d=0;d<5;d++){const m=4-d,g=cu[d],y=uu[d],_=xs[d],b=Es[d],x=ou[d],A=iu[d];for(let v=0;v<16;v++){const E=he(a+Et(d,r,c,u)+ge[_[v]]+g,x[v])+f|0;a=f,f=u,u=he(c,10)|0,c=r,r=E}for(let v=0;v<16;v++){const E=he(n+Et(m,o,i,l)+ge[b[v]]+y,A[v])+h|0;n=h,h=l,l=he(i,10)|0,i=o,o=E}}this.set(this.h1+c+l|0,this.h2+u+h|0,this.h3+f+n|0,this.h4+a+o|0,this.h0+r+i|0)}roundClean(){ft(ge)}destroy(){this.destroyed=!0,ft(this.buffer),this.set(0,0,0,0,0)}}const lu=$s(()=>new du),fu=lu;function hu(e,t){const s=t||"hex",a=fu(w(e,{strict:!1})?U(e):e);return s==="bytes"?a:xe(a)}const He=new Map;async function mu(e){const{getSocket:t,keepAlive:s=!0,key:a="socket",reconnect:n=!0,url:r}=e,{interval:o=3e4}=typeof s=="object"?s:{},{attempts:c=5,delay:i=2e3}=typeof n=="object"?n:{},u=JSON.stringify({keepAlive:s,key:a,url:r,reconnect:n});let l=He.get(u);if(l)return l;let f=0;const{schedule:h}=Ks({id:u,fn:async()=>{const g=new Map,y=new Map;let _,b,x,A=!1;function v(){if(n&&f<c){if(A)return;A=!0,f++,b==null||b.close(),setTimeout(async()=>{await E().catch(console.error),A=!1},i)}else g.clear(),y.clear()}async function E(){const P=await t({onClose(){var S,L;for(const I of g.values())(S=I.onError)==null||S.call(I,new te({url:r}));for(const I of y.values())(L=I.onError)==null||L.call(I,new te({url:r}));v()},onError(S){var L,I;_=S;for(const R of g.values())(L=R.onError)==null||L.call(R,_);for(const R of y.values())(I=R.onError)==null||I.call(R,_);v()},onOpen(){_=void 0,f=0},onResponse(S){const L=S.method==="eth_subscription",I=L?S.params.subscription:S.id,R=L?y:g,M=R.get(I);M&&M.onResponse(S),L||R.delete(I)}});if(b=P,s&&(x&&clearInterval(x),x=setInterval(()=>{var S;return(S=b.ping)==null?void 0:S.call(b)},o)),n&&y.size>0){const S=y.entries();for(const[L,{onResponse:I,body:R,onError:M}]of S)R&&(y.delete(L),l==null||l.request({body:R,onResponse:I,onError:M}))}return P}return await E(),_=void 0,l={close(){x&&clearInterval(x),b.close(),He.delete(u)},get socket(){return b},request({body:P,onError:S,onResponse:L}){_&&S&&S(_);const I=P.id??Js.take(),R=M=>{var ut;typeof M.id=="number"&&I!==M.id||(P.method==="eth_subscribe"&&typeof M.result=="string"&&y.set(M.result,{onResponse:R,onError:S,body:P}),P.method==="eth_unsubscribe"&&y.delete((ut=P.params)==null?void 0:ut[0]),L(M))};g.set(I,{onResponse:R,onError:S});try{b.request({body:{jsonrpc:"2.0",id:I,...P}})}catch(M){S==null||S(M)}},requestAsync({body:P,timeout:S=1e4}){return Ut(()=>new Promise((L,I)=>this.request({body:P,onError:I,onResponse:L})),{errorInstance:new Dt({body:P,url:r}),timeout:S})},requests:g,subscriptions:y,url:r},He.set(u,l),[l]}}),[d,[m]]=await h();return m}async function _e(e,t={}){const{keepAlive:s,reconnect:a}=t;return mu({async getSocket({onClose:n,onError:r,onOpen:o,onResponse:c}){const i=await Ys(()=>import("./native-Bi5qYUKS.js"),__vite__mapDeps([0,1,2])).then(d=>d.WebSocket),u=new i(e);function l(){u.removeEventListener("close",l),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",o),n()}function f({data:d}){try{const m=JSON.parse(d);c(m)}catch(m){r(m)}}u.addEventListener("close",l),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",o),u.readyState===i.CONNECTING&&await new Promise((d,m)=>{u&&(u.onopen=d,u.onerror=m)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),l()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new ze({url:u.url,cause:new te({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new ze({body:d,url:u.url,cause:new te({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:s,reconnect:a,url:e})}async function gu(e){const t=await _e(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function Ps(e){return Qe(e,-32)===Bc}function Ss(e){return Qs(e)}function pu(e){if(!Ps(e))return{signature:e};const[t,s,a]=Xe([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:s,signature:a}}function yu(e){if(!Ss(e))return{signature:e};const{authorization:t,to:s,...a}=Xs(e);return{authorization:{address:t.address,chainId:t.chainId,nonce:Number(t.nonce),r:p(t.r,{size:32}),s:p(t.s,{size:32}),yParity:t.yParity},...s?{address:s}:{},...a}}async function Ts({message:e,signature:t}){return ne({hash:zt(e),signature:t})}async function Is(e){const{domain:t,message:s,primaryType:a,signature:n,types:r}=e;return ne({hash:Gt({domain:t,message:s,primaryType:a,types:r}),signature:n})}function bu(e){const{address:t,data:s,signature:a,to:n="hex"}=e,r=Zs({authorization:{address:e.authorization.address,chainId:e.authorization.chainId,nonce:BigInt(e.authorization.nonce),r:BigInt(e.authorization.r),s:BigInt(e.authorization.s),yParity:e.authorization.yParity},data:s,signature:a,to:t});return n==="hex"?r:Q(r)}async function wu({address:e,hash:t,signature:s}){return Te(j(e),await ne({hash:t,signature:s}))}async function _u({address:e,message:t,signature:s}){return Te(j(e),await Ts({message:t,signature:s}))}async function xu(e){const{address:t,domain:s,message:a,primaryType:n,signature:r,types:o}=e;return Te(j(t),await Is({domain:s,message:a,primaryType:n,signature:r,types:o}))}function Cs(e){const t=Qe(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&B(t)>=192)return"legacy";throw new Vt({serializedType:t})}function As(e){const t=Cs(e);return t==="eip1559"?Pu(e):t==="eip2930"?Su(e):t==="eip4844"?vu(e):t==="eip7702"?Eu(e):Tu(e)}function Eu(e){const t=Ce(e),[s,a,n,r,o,c,i,u,l,f,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new X({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,authorizationList:f,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:B(s),type:"eip7702"};return w(c)&&c!=="0x"&&(g.to=c),w(o)&&o!=="0x"&&(g.gas=T(o)),w(u)&&u!=="0x"&&(g.data=u),w(a)&&(g.nonce=a==="0x"?0:B(a)),w(i)&&i!=="0x"&&(g.value=T(i)),w(r)&&r!=="0x"&&(g.maxFeePerGas=T(r)),w(n)&&n!=="0x"&&(g.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(g.accessList=Ae(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=Iu(f)),ms(g),{...t.length===13?ue(t):void 0,...g}}function vu(e){const t=Ce(e),s=t.length===4,a=s?t[0]:t,n=s?t.slice(1):[],[r,o,c,i,u,l,f,h,d,m,g,y,_,b]=a,[x,A,v]=n;if(!(a.length===11||a.length===14))throw new X({attributes:{chainId:r,nonce:o,maxPriorityFeePerGas:c,maxFeePerGas:i,gas:u,to:l,value:f,data:h,accessList:d,...a.length>9?{v:y,r:_,s:b}:{}},serializedTransaction:e,type:"eip4844"});const E={blobVersionedHashes:g,chainId:B(r),type:"eip4844"};return w(l)&&l!=="0x"&&(E.to=l),w(u)&&u!=="0x"&&(E.gas=T(u)),w(h)&&h!=="0x"&&(E.data=h),w(o)&&(E.nonce=o==="0x"?0:B(o)),w(f)&&f!=="0x"&&(E.value=T(f)),w(m)&&m!=="0x"&&(E.maxFeePerBlobGas=T(m)),w(i)&&i!=="0x"&&(E.maxFeePerGas=T(i)),w(c)&&c!=="0x"&&(E.maxPriorityFeePerGas=T(c)),d.length!==0&&d!=="0x"&&(E.accessList=Ae(d)),x&&A&&v&&(E.sidecars=Je({blobs:x,commitments:A,proofs:v})),gs(E),{...a.length===14?ue(a):void 0,...E}}function Pu(e){const t=Ce(e),[s,a,n,r,o,c,i,u,l,f,h,d]=t;if(!(t.length===9||t.length===12))throw new X({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,...t.length>9?{v:f,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:B(s),type:"eip1559"};return w(c)&&c!=="0x"&&(m.to=c),w(o)&&o!=="0x"&&(m.gas=T(o)),w(u)&&u!=="0x"&&(m.data=u),w(a)&&(m.nonce=a==="0x"?0:B(a)),w(i)&&i!=="0x"&&(m.value=T(i)),w(r)&&r!=="0x"&&(m.maxFeePerGas=T(r)),w(n)&&n!=="0x"&&(m.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(m.accessList=Ae(l)),oe(m),{...t.length===12?ue(t):void 0,...m}}function Su(e){const t=Ce(e),[s,a,n,r,o,c,i,u,l,f,h]=t;if(!(t.length===8||t.length===11))throw new X({attributes:{chainId:s,nonce:a,gasPrice:n,gas:r,to:o,value:c,data:i,accessList:u,...t.length>8?{v:l,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:B(s),type:"eip2930"};return w(o)&&o!=="0x"&&(d.to=o),w(r)&&r!=="0x"&&(d.gas=T(r)),w(i)&&i!=="0x"&&(d.data=i),w(a)&&(d.nonce=a==="0x"?0:B(a)),w(c)&&c!=="0x"&&(d.value=T(c)),w(n)&&n!=="0x"&&(d.gasPrice=T(n)),u.length!==0&&u!=="0x"&&(d.accessList=Ae(u)),at(d),{...t.length===11?ue(t):void 0,...d}}function Tu(e){const t=rt(e,"hex"),[s,a,n,r,o,c,i,u,l]=t;if(!(t.length===6||t.length===9))throw new X({attributes:{nonce:s,gasPrice:a,gas:n,to:r,value:o,data:c,...t.length>6?{v:i,r:u,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(w(r)&&r!=="0x"&&(f.to=r),w(n)&&n!=="0x"&&(f.gas=T(n)),w(c)&&c!=="0x"&&(f.data=c),w(s)&&(f.nonce=s==="0x"?0:B(s)),w(o)&&o!=="0x"&&(f.value=T(o)),w(a)&&a!=="0x"&&(f.gasPrice=T(a)),nt(f),t.length===6)return f;const h=w(i)&&i!=="0x"?T(i):0n;if(l==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const d=h,m=Number((d-35n)/2n);if(m>0)f.chainId=m;else if(d!==27n&&d!==28n)throw new Ye({v:d});return f.v=d,f.s=l,f.r=u,f.yParity=d%2n===0n?1:0,f}function Ce(e){return rt(`0x${e.slice(4)}`,"hex")}function Ae(e){const t=[];for(let s=0;s<e.length;s++){const[a,n]=e[s];if(!V(a,{strict:!1}))throw new $({address:a});t.push({address:a,storageKeys:n.map(r=>bs(r)?r:K(r))})}return t}function Iu(e){const t=[];for(let s=0;s<e.length;s++){const[a,n,r,o,c,i]=e[s];t.push({address:n,chainId:a==="0x"?0:B(a),nonce:r==="0x"?0:B(r),...ue([o,c,i])})}return t}function ue(e){const t=e.slice(-3),s=t[0]==="0x"||T(t[0])===0n?27n:28n;return{r:Ge(t[1],{size:32}),s:Ge(t[2],{size:32}),v:s,yParity:s===27n?0:1}}function Cu(e,t="wei"){return Ze(e,$t[t])}function Au(e,t="wei"){return Ze(e,Wt[t])}async function Ru(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Bu(e){return e.request({method:`${e.mode}_dumpState`})}async function Lu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function ku(e){return await e.request({method:"txpool_content"})}async function Mu(e){const{pending:t,queued:s}=await e.request({method:"txpool_status"});return{pending:B(t),queued:B(s)}}async function qu(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Ou(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[p(t)]})}async function Fu(e){return await e.request({method:"txpool_inspect"})}async function Hu(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function ju(e,{blocks:t,interval:s}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:p(t)}]}):await e.request({method:`${e.mode}_mine`,params:[p(t),p(s||0)]})}async function Nu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Uu(e,{blockNumber:t,jsonRpcUrl:s}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:s}}]})}async function Du(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function zu(e,t){var _,b,x;const{accessList:s,data:a,from:n,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f,...h}=t,d=(x=(b=(_=e.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,g=(d||et)({...ea(h,{format:d}),accessList:s,data:a,from:n,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function Gu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Vu(e,{address:t,value:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,p(s)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,p(s)]})}async function $u(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[p(t)]})}async function Wu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[s]})}async function Ku(e,{address:t,bytecode:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,s]}):await e.request({method:`${e.mode}_setCode`,params:[t,s]})}async function Ju(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Yu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[s]})}async function Qu(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Xu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[p(t)]})}async function Zu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[p(t)]})}async function ed(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[p(t)]})}async function td(e,{address:t,nonce:s}){await e.request({method:`${e.mode}_setNonce`,params:[t,p(s)]})}async function sd(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function ad(e,{address:t,index:s,value:a}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof s=="number"?p(s):s,a]})}async function nd(e){return await e.request({method:"evm_snapshot"})}async function rd(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function od(e,{chain:t}){const{id:s,name:a,nativeCurrency:n,rpcUrls:r,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:p(s),chainName:a,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:o?Object.values(o).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function id(e,t){const{abi:s,args:a,bytecode:n,...r}=t,o=Kt({abi:s,args:a,bytecode:n});return st(e,{...r,...r.authorizationList?{to:null}:{},data:o})}async function cd(e){var s;return((s=e.account)==null?void 0:s.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(a=>Jt(a))}async function ud(e,t={}){const{account:s=e.account,chainId:a}=t,n=s?re(s):void 0,r=a?[n==null?void 0:n.address,[p(a)]]:[n==null?void 0:n.address],o=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[i,u]of Object.entries(o)){c[Number(i)]={};for(let[l,f]of Object.entries(u))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(i)][l]=f}return typeof a=="number"?c[a]:c}async function dd(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function ld(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>j(s))}async function fd(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function hd(e,t){const{id:s}=t;await e.request({method:"wallet_showCallsStatus",params:[s]})}async function md(e,t){const{account:s=e.account}=t;if(!s)throw new Ie({docsPath:"/docs/eip7702/signAuthorization"});const a=re(s);if(!a.signAuthorization)throw new ta({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const n=await ds(e,t);return a.signAuthorization(n)}async function gd(e,t){var u,l,f,h;const{account:s=e.account,chain:a=e.chain,...n}=t;if(!s)throw new Ie({docsPath:"/docs/actions/wallet/signTransaction"});const r=re(s);Yt({account:r,...t});const o=await H(e,Qt,"getChainId")({});a!==null&&ls({currentChainId:o,chain:a});const c=(a==null?void 0:a.formatters)||((u=e.chain)==null?void 0:u.formatters),i=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||et;return r.signTransaction?r.signTransaction({...n,chainId:o},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...i(n),chainId:p(o),from:r.address}]},{retryCount:0})}async function pd(e,t){const{account:s=e.account,domain:a,message:n,primaryType:r}=t;if(!s)throw new Ie({docsPath:"/docs/actions/wallet/signTypedData"});const o=re(s),c={EIP712Domain:Xt({domain:a}),...t.types};if(Zt({domain:a,message:n,primaryType:r,types:c}),o.signTypedData)return o.signTypedData({domain:a,message:n,primaryType:r,types:c});const i=es({domain:a,message:n,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[o.address,i]},{retryCount:0})}async function yd(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:p(t)}]},{retryCount:0})}async function bd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Rs(e,t){const{abi:s,account:a=e.account,address:n,args:r,dataSuffix:o,functionName:c,...i}=t;if(typeof a>"u")throw new Ie({docsPath:"/docs/contract/writeContract"});const u=a?re(a):null,l=ts({abi:s,args:r,functionName:c});try{return await H(e,st,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:n,account:u,...i})}catch(f){throw ss(f,{abi:s,address:n,args:r,docsPath:"/docs/contract/writeContract",functionName:c,sender:u==null?void 0:u.address})}}function wd({abi:e,address:t,client:s}){const a=s,[n,r]=a?"public"in a&&"wallet"in a?[a.public,a.wallet]:"public"in a?[a.public,void 0]:"wallet"in a?[void 0,a.wallet]:[a,a]:[void 0,void 0],o=n!=null,c=r!=null,i={};let u=!1,l=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:l=!0:h.type==="event"&&(f=!0),u&&l&&f)break;return o&&(u&&(i.read=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=pe(m);return H(n,sa,"readContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),l&&(i.simulate=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=pe(m);return H(n,aa,"simulateContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),f&&(i.createEventFilter=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=je(m,g);return H(n,na,"createContractEventFilter")({abi:e,address:t,eventName:d,args:y,..._})}}}),i.getEvents=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=je(m,g);return H(n,ra,"getContractEvents")({abi:e,address:t,eventName:d,args:y,..._})}}}),i.watchEvent=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=je(m,g);return H(n,oa,"watchContractEvent")({abi:e,address:t,eventName:d,args:y,..._})}}}))),c&&l&&(i.write=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=pe(m);return H(r,Rs,"writeContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),(o||c)&&l&&(i.estimateGas=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=pe(m);return H(n??r,ia,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...y,account:y.account??r.account})}}})),i.address=t,i.abi=e,i}function pe(e){const t=e.length&&Array.isArray(e[0]),s=t?e[0]:[],a=(t?e[1]:e[0])??{};return{args:s,options:a}}function je(e,t){let s=!1;Array.isArray(e[0])?s=!0:e.length===1?s=t.inputs.some(r=>r.indexed):e.length===2&&(s=!0);const a=s?e[0]:void 0,n=(s?e[1]:e[0])??{};return{args:a,options:n}}function Bs({mode:e}){return t=>{const s=t.extend(()=>({mode:e}));return{dropTransaction:a=>Ru(s,a),dumpState:()=>Bu(s),getAutomine:()=>Lu(s),getTxpoolContent:()=>ku(s),getTxpoolStatus:()=>Mu(s),impersonateAccount:a=>qu(s,a),increaseTime:a=>Ou(s,a),inspectTxpool:()=>Fu(s),loadState:a=>Hu(s,a),mine:a=>ju(s,a),removeBlockTimestampInterval:()=>Nu(s),reset:a=>Uu(s,a),revert:a=>Du(s,a),sendUnsignedTransaction:a=>zu(s,a),setAutomine:a=>Gu(s,a),setBalance:a=>Vu(s,a),setBlockGasLimit:a=>$u(s,a),setBlockTimestampInterval:a=>Wu(s,a),setCode:a=>Ku(s,a),setCoinbase:a=>Ju(s,a),setIntervalMining:a=>Yu(s,a),setLoggingEnabled:a=>Qu(s,a),setMinGasPrice:a=>Xu(s,a),setNextBlockBaseFeePerGas:a=>Zu(s,a),setNextBlockTimestamp:a=>ed(s,a),setNonce:a=>td(s,a),setRpcUrl:a=>sd(s,a),setStorageAt:a=>ad(s,a),snapshot:()=>nd(s),stopImpersonatingAccount:a=>rd(s,a)}}}function _d(e){const{key:t="test",name:s="Test Client",mode:a}=e;return tt({...e,key:t,name:s,type:"testClient"}).extend(r=>({mode:a,...Bs({mode:a})(r)}))}function Ls(e){return{addChain:t=>od(e,t),deployContract:t=>id(e,t),getAddresses:()=>cd(e),getCallsStatus:t=>Mc(e,t),getCapabilities:t=>ud(e,t),getChainId:()=>Qt(e),getPermissions:()=>dd(e),prepareAuthorization:t=>ds(e,t),prepareTransactionRequest:t=>da(e,t),requestAddresses:()=>ld(e),requestPermissions:t=>fd(e,t),sendCalls:t=>kc(e,t),sendRawTransaction:t=>ua(e,t),sendTransaction:t=>st(e,t),showCallsStatus:t=>hd(e,t),signAuthorization:t=>md(e,t),signMessage:t=>ca(e,t),signTransaction:t=>gd(e,t),signTypedData:t=>pd(e,t),switchChain:t=>yd(e,t),waitForCallsStatus:t=>Lc(e,t),watchAsset:t=>bd(e,t),writeContract:t=>Rs(e,t)}}function xd(e){const{key:t="wallet",name:s="Wallet Client",transport:a}=e;return tt({...e,key:t,name:s,transport:a,type:"walletClient"}).extend(Ls)}function Ed(e,t={}){const{keepAlive:s,key:a="webSocket",methods:n,name:r="WebSocket JSON-RPC",reconnect:o,retryDelay:c}=t;return({chain:i,retryCount:u,timeout:l})=>{var g;const f=t.retryCount??u,h=l??t.timeout??1e4,d=e||((g=i==null?void 0:i.rpcUrls.default.webSocket)==null?void 0:g[0]),m={keepAlive:s,reconnect:o};if(!d)throw new as;return ns({key:a,methods:n,name:r,async request({method:y,params:_}){const b={method:y,params:_},x=await _e(d,m),{error:A,result:v}=await x.requestAsync({body:b,timeout:h});if(A)throw new rs({body:b,error:A,url:d});return v},retryCount:f,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return gu(d)},getRpcClient(){return _e(d,m)},async subscribe({params:y,onData:_,onError:b}){const x=await _e(d,m),{result:A}=await new Promise((v,E)=>x.request({body:{method:"eth_subscribe",params:y},onError(P){E(P),b==null||b(P)},onResponse(P){if(P.error){E(P.error),b==null||b(P.error);return}if(typeof P.id=="number"){v(P);return}P.method==="eth_subscription"&&_(P.params)}}));return{subscriptionId:A,async unsubscribe(){return new Promise(v=>x.request({body:{method:"eth_unsubscribe",params:[A]},onResponse:v}))}}}})}}class vd extends Error{constructor(t,s){super(s),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=s}}const Ne="/docs/contract/decodeDeployData";function Pd(e){const{abi:t,bytecode:s,data:a}=e;if(a===s)return{bytecode:s};const n=t.find(o=>"type"in o&&o.type==="constructor");if(!n)throw new os({docsPath:Ne});if(!("inputs"in n))throw new Ve({docsPath:Ne});if(!n.inputs||n.inputs.length===0)throw new Ve({docsPath:Ne});return{args:Xe(n.inputs,`0x${a.replace(s,"")}`),bytecode:s}}function Sd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(c=>Q(c)):e.blobs,a=s.reduce((c,i)=>c+i.length,0),n=De(new Uint8Array(a));let r=!0;for(const c of s){const i=De(c);for(;r&&i.position<c.length;){i.incrementPosition(1);let u=31;c.length-i.position<31&&(u=c.length-i.position);for(const l in Array.from({length:u})){const f=i.readByte();if(f===128&&!i.inspectBytes(i.remaining).includes(128)){r=!1;break}n.pushByte(f)}}}const o=n.bytes.slice(0,n.position);return t==="hex"?z(o):o}function Td(e){const{sidecars:t,version:s}=e,a=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),n=[];for(const{commitment:r}of t)n.push(is({commitment:r,to:a,version:s}));return n}const Id=2147483648;function Cd(e){if(e===1)return 60n;if(e>=Id||e<0)throw new cs({chainId:e});return BigInt((2147483648|e)>>>0)}function ks({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Ad(e,t){try{e.loadTrustedSetup(t)}catch(s){const a=s;if(!a.message.includes("trusted setup is already loaded"))throw a}return ks(e)}function Rd({r:e,yParityAndS:t}){const s=Q(t),a=s[0]&128?1:0,n=s;return a===1&&(n[0]&=127),{r:e,s:z(n),yParity:a}}function vt(e){const{r:t,s}=us.Signature.fromCompact(e.slice(2,130));return{r:p(t,{size:32}),yParityAndS:p(s,{size:32})}}async function Bd(e){const{serializedTransaction:t,signature:s}=e,a=As(t),n=s??{r:a.r,s:a.s,v:a.v,yParity:a.yParity},r=ps({...a,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await ne({hash:ee(r),signature:n})}function Pt({r:e,yParityAndS:t}){return`0x${new us.Signature(T(e),T(t)).toCompactHex()}`}function Ld(e){const{r:t,s,v:a,yParity:n}=e,r=Number(n??a-27n);let o=s;if(r===1){const c=Q(s);c[0]|=128,o=z(c)}return{r:t,yParityAndS:o}}const kd=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:os,AbiConstructorParamsNotFoundError:Ve,AbiDecodingDataSizeInvalidError:la,AbiDecodingDataSizeTooSmallError:fa,AbiDecodingZeroDataError:ha,AbiEncodingArrayLengthMismatchError:ma,AbiEncodingBytesSizeMismatchError:ga,AbiEncodingLengthMismatchError:pa,AbiErrorInputsNotFoundError:ya,AbiErrorNotFoundError:ba,AbiErrorSignatureNotFoundError:wa,AbiEventNotFoundError:_a,AbiEventSignatureEmptyTopicsError:xa,AbiEventSignatureNotFoundError:Ea,AbiFunctionNotFoundError:va,AbiFunctionOutputsNotFoundError:Pa,AbiFunctionSignatureNotFoundError:Sa,AccountStateConflictError:Ta,AtomicReadyWalletRejectedUpgradeError:Ia,AtomicityNotSupportedError:Ca,BaseError:Se,BaseFeeScalarError:Aa,BlockNotFoundError:Ra,BundleFailedError:qc,BundleTooLargeError:Ba,BytesSizeMismatchError:La,CallExecutionError:ka,ChainDisconnectedError:Ma,ChainDoesNotSupportContract:qa,ChainMismatchError:Oa,ChainNotFoundError:Fa,CircularReferenceError:Ha,ClientChainNotConfiguredError:ja,ContractFunctionExecutionError:Na,ContractFunctionRevertedError:Ua,ContractFunctionZeroDataError:Da,CounterfactualDeploymentFailedError:za,DecodeLogDataMismatch:Ga,DecodeLogTopicsMismatch:Va,DuplicateIdError:$a,EIP1193ProviderRpcError:vd,Eip1559FeesNotSupportedError:Wa,EnsAvatarInvalidNftUriError:Ka,EnsAvatarUnsupportedNamespaceError:Ja,EnsAvatarUriResolutionError:Ya,EnsInvalidChainIdError:cs,EstimateGasExecutionError:Qa,ExecutionRevertedError:Xa,FeeCapTooHighError:Pe,FeeCapTooLowError:Za,FeeConflictError:en,FilterTypeNotSupportedError:tn,HttpRequestError:sn,InsufficientFundsError:an,IntegerOutOfRangeError:nn,InternalRpcError:rn,IntrinsicGasTooHighError:on,IntrinsicGasTooLowError:cn,InvalidAbiDecodingTypeError:un,InvalidAbiEncodingTypeError:dn,InvalidAbiItemError:ln,InvalidAbiParameterError:Bt,InvalidAbiParametersError:fn,InvalidAbiTypeParameterError:hn,InvalidAddressError:$,InvalidArrayError:mn,InvalidBytesBooleanError:gn,InvalidChainIdError:se,InvalidDecimalNumberError:pn,InvalidDefinitionTypeError:yn,InvalidDomainError:bn,InvalidFunctionModifierError:wn,InvalidHexBooleanError:_n,InvalidHexValueError:Nt,InvalidInputRpcError:xn,InvalidLegacyVError:Ye,InvalidModifierError:En,InvalidParameterError:vn,InvalidParamsRpcError:Pn,InvalidParenthesisError:Sn,InvalidPrimaryTypeError:Tn,InvalidRequestRpcError:In,InvalidSerializableTransactionError:Cn,InvalidSerializedTransactionError:X,InvalidSerializedTransactionTypeError:Vt,InvalidSignatureError:An,InvalidStorageKeySizeError:qt,InvalidStructSignatureError:Rn,InvalidStructTypeError:Bn,JsonRpcVersionUnsupportedError:Ln,LimitExceededRpcError:kn,MaxFeePerGasTooLowError:Mn,MethodNotFoundRpcError:qn,MethodNotSupportedRpcError:On,NonceMaxValueError:Fn,NonceTooHighError:Hn,NonceTooLowError:jn,ParseRpcError:Nn,ProviderDisconnectedError:Un,ProviderRpcError:Dn,RawContractError:zn,ResourceNotFoundRpcError:Gn,ResourceUnavailableRpcError:Vn,RpcError:$n,RpcRequestError:rs,SizeExceedsPaddingSizeError:Wn,SizeOverflowError:Kn,SliceOffsetOutOfBoundsError:Jn,SocketClosedError:te,SolidityProtectedKeywordError:Yn,StateAssignmentConflictError:Qn,SwitchChainError:Xn,TimeoutError:Dt,TipAboveFeeCapError:Mt,TransactionExecutionError:Zn,TransactionNotFoundError:er,TransactionReceiptNotFoundError:tr,TransactionRejectedRpcError:sr,TransactionTypeNotSupportedError:ar,UnauthorizedProviderError:nr,UnknownBundleIdError:rr,UnknownNodeError:or,UnknownRpcError:ir,UnknownSignatureError:cr,UnknownTypeError:ur,UnsupportedChainIdError:dr,UnsupportedNonOptionalCapabilityError:lr,UnsupportedPackedAbiType:fr,UnsupportedProviderMethodError:hr,UrlRequiredError:as,UserRejectedRequestError:mr,WaitForCallsStatusTimeoutError:Oc,WaitForTransactionReceiptTimeoutError:gr,WebSocketRequestError:ze,assertCurrentChain:ls,assertRequest:Yt,assertTransactionEIP1559:oe,assertTransactionEIP2930:at,assertTransactionLegacy:nt,blobsToCommitments:Ft,blobsToProofs:jt,boolToBytes:pr,boolToHex:yr,bytesToBigInt:br,bytesToBool:wr,bytesToHex:z,bytesToNumber:_r,bytesToRlp:xr,bytesToString:Er,ccipFetch:_t,ccipRequest:_t,checksumAddress:Jt,commitmentToVersionedHash:is,commitmentsToVersionedHashes:Ht,compactSignatureToHex:Pt,compactSignatureToSignature:Rd,concat:kt,concatBytes:vr,concatHex:ae,createClient:tt,createNonceManager:Fc,createPublicClient:Pr,createTestClient:_d,createTransport:ns,createWalletClient:xd,custom:Sr,decodeAbiParameters:Xe,decodeDeployData:Pd,decodeErrorResult:Tr,decodeEventLog:Ir,decodeFunctionData:Cr,decodeFunctionResult:Ar,defineBlock:Rr,defineChain:Br,defineKzg:ks,defineTransaction:Lr,defineTransactionReceipt:kr,defineTransactionRequest:Mr,deploylessCallViaBytecodeBytecode:qr,deploylessCallViaFactoryBytecode:Or,domainSeparator:Fr,encodeAbiParameters:Hr,encodeDeployData:Kt,encodeErrorResult:jr,encodeEventTopics:Nr,encodeFunctionData:ts,encodeFunctionResult:Ur,encodePacked:Hc,erc1155Abi:Dr,erc20Abi:zr,erc20Abi_bytes32:Gr,erc4626Abi:Vr,erc6492SignatureValidatorAbi:ht,erc6492SignatureValidatorByteCode:mt,erc721Abi:$r,ethAddress:Wr,etherUnits:$t,extractChain:su,fallback:Dc,formatBlock:Kr,formatEther:Jr,formatGwei:Yr,formatLog:Qr,formatTransaction:Xr,formatTransactionReceipt:Zr,formatTransactionRequest:et,formatUnits:eo,fromBlobs:Sd,fromBytes:to,fromHex:so,fromRlp:rt,getAbiItem:ao,getAddress:j,getChainContractAddress:no,getContract:wd,getContractAddress:Jc,getContractError:ss,getCreate2Address:hs,getCreateAddress:fs,getEventSelector:gt,getEventSignature:me,getFunctionSelector:pt,getFunctionSignature:me,getSerializedTransactionType:Cs,getTransactionType:Ot,getTypesForEIP712Domain:Xt,gweiUnits:Wt,hashDomain:ro,hashMessage:zt,hashStruct:oo,hashTypedData:Gt,hexToBigInt:T,hexToBool:io,hexToBytes:Q,hexToCompactSignature:vt,hexToNumber:B,hexToRlp:co,hexToSignature:wt,hexToString:uo,http:lo,isAddress:V,isAddressEqual:Te,isBytes:$e,isErc6492Signature:Ps,isErc8010Signature:Ss,isHash:bs,isHex:w,keccak256:ee,labelhash:fo,maxInt104:ho,maxInt112:mo,maxInt120:go,maxInt128:po,maxInt136:yo,maxInt144:bo,maxInt152:wo,maxInt16:_o,maxInt160:xo,maxInt168:Eo,maxInt176:vo,maxInt184:Po,maxInt192:So,maxInt200:To,maxInt208:Io,maxInt216:Co,maxInt224:Ao,maxInt232:Ro,maxInt24:Bo,maxInt240:Lo,maxInt248:ko,maxInt256:Mo,maxInt32:qo,maxInt40:Oo,maxInt48:Fo,maxInt56:Ho,maxInt64:jo,maxInt72:No,maxInt8:Uo,maxInt80:Do,maxInt88:zo,maxInt96:Go,maxUint104:Vo,maxUint112:$o,maxUint120:Wo,maxUint128:Ko,maxUint136:Jo,maxUint144:Yo,maxUint152:Qo,maxUint16:Xo,maxUint160:Zo,maxUint168:ei,maxUint176:ti,maxUint184:si,maxUint192:ai,maxUint200:ni,maxUint208:ri,maxUint216:oi,maxUint224:ii,maxUint232:ci,maxUint24:ui,maxUint240:di,maxUint248:li,maxUint256:ve,maxUint32:fi,maxUint40:hi,maxUint48:mi,maxUint56:gi,maxUint64:pi,maxUint72:yi,maxUint8:bi,maxUint80:wi,maxUint88:_i,maxUint96:xi,minInt104:Ei,minInt112:vi,minInt120:Pi,minInt128:Si,minInt136:Ti,minInt144:Ii,minInt152:Ci,minInt16:Ai,minInt160:Ri,minInt168:Bi,minInt176:Li,minInt184:ki,minInt192:Mi,minInt200:qi,minInt208:Oi,minInt216:Fi,minInt224:Hi,minInt232:ji,minInt24:Ni,minInt240:Ui,minInt248:Di,minInt256:zi,minInt32:Gi,minInt40:Vi,minInt48:$i,minInt56:Wi,minInt64:Ki,minInt72:Ji,minInt8:Yi,minInt80:Qi,minInt88:Xi,minInt96:Zi,multicall3Abi:ec,namehash:tc,nonceManager:jc,numberToBytes:sc,numberToHex:p,offchainLookup:Gc,offchainLookupAbiItem:Vc,offchainLookupSignature:$c,pad:Lt,padBytes:ac,padHex:Ge,parseAbi:nc,parseAbiItem:rc,parseAbiParameter:Kc,parseAbiParameters:oc,parseCompactSignature:vt,parseErc6492Signature:pu,parseErc8010Signature:yu,parseEther:Cu,parseEventLogs:ic,parseGwei:Au,parseSignature:wt,parseTransaction:As,parseUnits:Ze,prepareEncodeFunctionData:cc,presignMessagePrefix:uc,publicActions:dc,recoverAddress:ne,recoverMessageAddress:Ts,recoverPublicKey:lc,recoverTransactionAddress:Bd,recoverTypedDataAddress:Is,ripemd160:hu,rpcSchema:fc,rpcTransactionType:hc,serializeAccessList:ie,serializeCompactSignature:Pt,serializeErc6492Signature:Nc,serializeErc8010Signature:bu,serializeSignature:yt,serializeTransaction:ps,serializeTypedData:es,setErrorConfig:mc,setupKzg:Ad,sha256:gc,shouldThrow:zc,sidecarsToVersionedHashes:Td,signatureToCompactSignature:Ld,signatureToHex:yt,size:Ke,slice:We,sliceBytes:pc,sliceHex:Qe,stringToBytes:yc,stringToHex:bc,stringify:wc,testActions:Bs,toBlobSidecars:Je,toBlobs:_c,toBytes:U,toCoinType:Cd,toEventHash:bt,toEventSelector:gt,toEventSignature:me,toFunctionHash:bt,toFunctionSelector:pt,toFunctionSignature:me,toHex:xe,toPrefixedMessage:xc,toRlp:D,transactionType:Ec,trim:K,universalSignatureValidatorAbi:ht,universalSignatureValidatorByteCode:mt,validateTypedData:Zt,verifyHash:wu,verifyMessage:_u,verifyTypedData:xu,walletActions:Ls,webSocket:Ed,weiUnits:vc,withCache:Pc,withRetry:Sc,withTimeout:Ut,zeroAddress:Tc,zeroHash:Uc},Symbol.toStringTag,{value:"Module"}));var ot={},Re={},Ms={},Ee={},qs={},de={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.getSDKVersion=void 0;const Md=()=>"9.1.0";le.getSDKVersion=Md;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.generateRequestId=void 0;const qd=e=>e.toString(16).padStart(2,"0"),Od=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,qd).join("")},Fd=()=>typeof window<"u"?Od(10):new Date().getTime().toString(36);Be.generateRequestId=Fd;Object.defineProperty(de,"__esModule",{value:!0});de.MessageFormatter=void 0;const Hd=le,jd=Be;class Le{}de.MessageFormatter=Le;Le.makeRequest=(e,t)=>({id:(0,jd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Hd.getSDKVersion)()}});Le.makeResponse=(e,t,s)=>({id:e,success:!0,version:s,data:t});Le.makeErrorResponse=(e,t,s)=>({id:e,success:!1,error:t,version:s});var O={};Object.defineProperty(O,"__esModule",{value:!0});O.RestrictedMethods=O.Methods=void 0;var St;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(St||(O.Methods=St={}));var Tt;(function(e){e.requestAddressBook="requestAddressBook"})(Tt||(O.RestrictedMethods=Tt={}));(function(e){var t=C&&C.__createBinding||(Object.create?function(r,o,c,i){i===void 0&&(i=c);var u=Object.getOwnPropertyDescriptor(o,c);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(r,i,u)}:function(r,o,c,i){i===void 0&&(i=c),r[i]=o[c]}),s=C&&C.__exportStar||function(r,o){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&t(o,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const a=de;class n{constructor(o=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:i,data:u,source:l})=>{const f=!u,h=!this.isServer&&l===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),m=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(y=>y.test(i))!==void 0),!f&&h&&m&&g},this.logIncomingMessage=i=>{console.info(`Safe Apps SDK v1: A message was received from origin ${i.origin}. `,i.data)},this.onParentMessage=i=>{this.isValidMessage(i)&&(this.debugMode&&this.logIncomingMessage(i),this.handleIncomingMessage(i.data))},this.handleIncomingMessage=i=>{const{id:u}=i,l=this.callbacks.get(u);l&&(l(i),this.callbacks.delete(u))},this.send=(i,u)=>{const l=a.MessageFormatter.makeRequest(i,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,h)=>{this.callbacks.set(l.id,d=>{if(!d.success){h(new Error(d.error));return}f(d)})})},this.allowedOrigins=o,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=n,s(O,e)})(qs);var ke={},Me={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.isObjectEIP712TypedData=void 0;const Nd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;qe.isObjectEIP712TypedData=Nd;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});var Fs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Rc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Fs);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});(function(e){var t=C&&C.__createBinding||(Object.create?function(a,n,r,o){o===void 0&&(o=r);var c=Object.getOwnPropertyDescriptor(n,r);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,o,c)}:function(a,n,r,o){o===void 0&&(o=r),a[o]=n[r]}),s=C&&C.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),s(qe,e),s(Os,e),s(Fs,e),s(Hs,e)})(Me);Object.defineProperty(ke,"__esModule",{value:!0});ke.TXs=void 0;const ye=O,Ud=Me;class Dd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(ye.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const s={message:t};return(await this.communicator.send(ye.Methods.signMessage,s)).data}async signTypedMessage(t){if(!(0,Ud.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(ye.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:s}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:s};return(await this.communicator.send(ye.Methods.sendTransactions,a)).data}}ke.TXs=Dd;var Oe={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.RPC_CALLS=void 0;Z.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Eth=void 0;const k=Z,zd=O,F={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Gd{constructor(t){this.communicator=t,this.call=this.buildRequest({call:k.RPC_CALLS.eth_call,formatters:[null,F.defaultBlockParam]}),this.getBalance=this.buildRequest({call:k.RPC_CALLS.eth_getBalance,formatters:[null,F.defaultBlockParam]}),this.getCode=this.buildRequest({call:k.RPC_CALLS.eth_getCode,formatters:[null,F.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:k.RPC_CALLS.eth_getStorageAt,formatters:[null,F.blockNumberToHex,F.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:k.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByHash,formatters:[null,F.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByNumber,formatters:[F.blockNumberToHex,F.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionCount,formatters:[null,F.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:k.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=s=>this.buildRequest({call:k.RPC_CALLS.eth_estimateGas})([s]),this.setSafeSettings=this.buildRequest({call:k.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:s,formatters:a}=t;return async n=>{a&&Array.isArray(n)&&a.forEach((c,i)=>{c&&(n[i]=c(n[i]))});const r={call:s,params:n||[]};return(await this.communicator.send(zd.Methods.rpcCall,r)).data}}}Oe.Eth=Gd;var Fe={};const Vd=Ic(kd);var J={};Object.defineProperty(J,"__esModule",{value:!0});J.MAGIC_VALUE_BYTES=J.MAGIC_VALUE=void 0;const $d="0x1626ba7e";J.MAGIC_VALUE=$d;const Wd="0x20c13b0b";J.MAGIC_VALUE_BYTES=Wd;var it={},fe={},G={};Object.defineProperty(G,"__esModule",{value:!0});G.PermissionsError=G.PERMISSIONS_REQUEST_REJECTED=void 0;G.PERMISSIONS_REQUEST_REJECTED=4001;class ct extends Error{constructor(t,s,a){super(t),this.code=s,this.data=a,Object.setPrototypeOf(this,ct.prototype)}}G.PermissionsError=ct;Object.defineProperty(fe,"__esModule",{value:!0});fe.Wallet=void 0;const Ue=O,be=G;class Kd{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Ue.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new be.PermissionsError("Permissions request is invalid",be.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Ue.Methods.wallet_requestPermissions,t)).data}catch{throw new be.PermissionsError("Permissions rejected",be.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(s=>typeof s=="object"?Object.keys(s).every(a=>!!Object.values(Ue.RestrictedMethods).includes(a)):!1)}}fe.Wallet=Kd;Object.defineProperty(it,"__esModule",{value:!0});const Jd=fe,It=G,Ct=(e,t)=>t.some(s=>s.parentCapability===e),Yd=()=>(e,t,s)=>{const a=s.value;return s.value=async function(){const n=new Jd.Wallet(this.communicator);let r=await n.getPermissions();if(Ct(t,r)||(r=await n.requestPermissions([{[t]:{}}])),!Ct(t,r))throw new It.PermissionsError("Permissions rejected",It.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},s};it.default=Yd;var Qd=C&&C.__decorate||function(e,t,s,a){var n=arguments.length,r=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,s,a);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},Xd=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Safe=void 0;const we=Vd,At=J,N=O,Rt=Z,Zd=Me,el=Xd(it);class js{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(N.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(N.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(N.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,s="0x"){const a=await this.getInfo(),n=(0,we.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:Rt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(N.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===At.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,s="0x"){const a=await this.getInfo(),n=(0,we.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:Rt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(N.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===At.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,we.hashMessage)(t)}calculateTypedMessageHash(t){const s=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const n=Object.values(t.types),r=Object.keys(t.types).filter(o=>n.every(c=>c.every(({type:i})=>i.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");a=r[0]}return(0,we.hashTypedData)({message:t.message,domain:{...t.domain,chainId:s,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(N.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,s="0x"){let a;if(typeof t=="string"&&(a=async()=>{const n=this.calculateMessageHash(t);return await this.isMessageHashSigned(n,s)}),(0,Zd.isObjectEIP712TypedData)(t)&&(a=async()=>{const n=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(n,s)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,s="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const n of a)if(await n(t,s))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(N.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(N.Methods.requestAddressBook,void 0)).data}}Fe.Safe=js;Qd([(0,el.default)()],js.prototype,"requestAddressBook",null);var tl=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ee,"__esModule",{value:!0});const sl=tl(qs),al=ke,nl=Oe,rl=Fe,ol=fe;class il{constructor(t={}){const{allowedDomains:s=null,debug:a=!1}=t;this.communicator=new sl.default(s,a),this.eth=new nl.Eth(this.communicator),this.txs=new al.TXs(this.communicator),this.safe=new rl.Safe(this.communicator),this.wallet=new ol.Wallet(this.communicator)}}Ee.default=il;(function(e){var t=C&&C.__createBinding||(Object.create?function(o,c,i,u){u===void 0&&(u=i);var l=Object.getOwnPropertyDescriptor(c,i);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[i]}}),Object.defineProperty(o,u,l)}:function(o,c,i,u){u===void 0&&(u=i),o[u]=c[i]}),s=C&&C.__exportStar||function(o,c){for(var i in o)i!=="default"&&!Object.prototype.hasOwnProperty.call(c,i)&&t(c,o,i)},a=C&&C.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const n=a(Ee);e.default=n.default,s(Ee,e),s(Me,e),s(O,e),s(de,e);var r=le;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),s(Z,e)})(Ms);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.numberToHex=Y.getLowerCase=void 0;function cl(e){return e&&e.toLowerCase()}Y.getLowerCase=cl;function ul(e){return`0x${e.toString(16)}`}Y.numberToHex=ul;Object.defineProperty(Re,"__esModule",{value:!0});Re.SafeAppProvider=void 0;const W=Ms,dl=Cc,q=Y;class ll extends dl.EventEmitter{constructor(t,s){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=s}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var n,r,o,c;const{method:s,params:a=[]}=t;switch(s){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,q.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=a,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(m);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const i={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof i.gas=="string"&&i.gas.startsWith("0x")&&(i.gas=parseInt(i.gas,16));const u=await this.sdk.txs.send({txs:[i],params:{safeTxGas:i.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:i.data,value:i.value,to:i.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,q.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,q.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=a[0]),h));case"eth_getTransactionReceipt":{let h=a[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=a[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=a[0];if(m!==(0,q.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const g=d.map((b,x)=>{if(!b.to)throw new Error(`Invalid call #${x}: missing "to" field`);return{to:b.to,data:b.data??"0x",value:b.value??(0,q.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:g});return{id:y}}case"wallet_getCallsStatus":{const h=a[0],d={[W.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[W.TransactionStatus.AWAITING_EXECUTION]:100,[W.TransactionStatus.SUCCESS]:200,[W.TransactionStatus.CANCELLED]:400,[W.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),g={version:"1.0",id:h,chainId:(0,q.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return g;const y=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!y)return g;const _=((r=(n=m.txData)==null?void 0:n.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(o=m.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:c.length)??1,b=Number(y.blockNumber),x=Number(y.gasUsed);return g.receipts=Array(_).fill({logs:y.logs,status:(0,q.numberToHex)(m.txStatus===W.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,q.numberToHex)(b),gasUsed:(0,q.numberToHex)(x),transactionHash:m.txHash}),g}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,q.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,s){t||s("Undefined request"),this.request(t).then(a=>s(null,{jsonrpc:"2.0",id:t.id,result:a})).catch(a=>s(a,null))}}Re.SafeAppProvider=ll;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Re;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(ot);const fl=Ac(ot),bl=Wc({__proto__:null,default:fl},[ot]);export{bl as i};
