const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/native-OH5J7ZFM.js","assets/index-E8K9zNcO.js","assets/index-B-egoCnV.css"])))=>i.map(i=>d[i]);
import{a_ as dt,a$ as lt,b0 as Ds,b1 as Us,b2 as Bt,b3 as D,aX as H,o as Lt,aw as ee,aS as We,e as kt,b4 as U,b5 as se,n as $,I as V,b6 as Pe,b7 as Se,b8 as Mt,B as ne,b9 as zs,aV as Ke,a3 as B,ba as Gs,bb as $s,bc as Vs,bd as qt,be as Ot,u as p,m as ae,bf as z,bg as Ft,bh as Nt,bi as Ht,bj as Je,bk as Ye,a5 as K,al as Ee,bl as jt,M as Q,bm as Ue,h as w,bn as Ws,bo as Ks,bp as me,bq as ft,br as Js,bs as Dt,bt as Ut,bu as Ys,bv as te,ae as Qs,bw as ze,a6 as Qe,bx as Xs,aY as Xe,by as Zs,bz as re,ac as zt,ad as Gt,bA as en,i as Ie,bB as $t,bC as X,a2 as I,bD as Ge,bE as Vt,bF as Wt,V as Ze,W as tn,bG as Kt,bH as Jt,Q as oe,N as Te,_ as sn,O as Yt,R as N,S as Qt,bI as Xt,bJ as Zt,bK as es,$ as ts,bL as ss,ay as nn,bM as an,bN as rn,bO as on,bP as cn,bQ as un,aJ as et,bR as dn,Z as ln,X as fn,bS as ns,c as as,bT as rs,bU as os,bV as $e,bW as is,bX as cs,ab as us,bY as hn,bZ as mn,b_ as gn,b$ as pn,c0 as yn,A as bn,c1 as wn,c2 as _n,c3 as xn,c4 as En,c5 as vn,c6 as Pn,c7 as Sn,c8 as In,c9 as Tn,ca as Cn,cb as An,a1 as Rn,cc as Bn,cd as Ln,ce as kn,x as Mn,cf as qn,cg as On,ch as Fn,D as Nn,C as Hn,ci as jn,cj as Dn,aE as Un,aD as zn,aC as Gn,ck as $n,cl as Vn,cm as Wn,cn as Kn,co as Jn,cp as Yn,cq as Qn,cr as Xn,cs as Zn,E as ea,ct as ta,cu as sa,cv as na,H as aa,cw as ra,cx as oa,cy as ia,cz as ca,cA as ua,cB as da,cC as la,cD as fa,cE as ha,cF as ma,cG as ga,cH as pa,cI as ya,cJ as ba,cK as wa,cL as _a,cM as xa,cN as Ea,cO as va,cP as Pa,cQ as Sa,cR as Ia,cS as Ta,cT as Ca,cU as Aa,cV as Ra,cW as Ba,cX as La,cY as ka,cZ as Ma,c_ as qa,c$ as Oa,d0 as Fa,d1 as Na,d2 as Ha,d3 as ja,d4 as Da,d5 as Ua,d6 as za,d7 as Ga,d8 as $a,d9 as Va,da as Wa,db as Ka,dc as Ja,dd as Ya,de as Qa,df as Xa,J as Za,dg as er,dh as tr,T as sr,di as nr,dj as ar,dk as rr,G as or,dl as ir,dm as cr,dn as ur,dp as dr,a0 as lr,z as fr,dq as hr,U as mr,dr as gr,ds as pr,r as yr,dt as br,du as wr,dv as _r,dw as xr,dx as Er,dy as vr,aR as Pr,dz as Sr,d as Ir,dA as Tr,aU as Cr,dB as Ar,dC as Rr,aQ as Br,dD as Lr,dE as kr,dF as Mr,dG as qr,dH as Or,dI as Fr,f as Nr,dJ as Hr,dK as jr,dL as Dr,dM as Ur,aZ as zr,dN as Gr,dO as $r,dP as ht,dQ as mt,dR as Vr,dS as Wr,dT as Kr,dU as Jr,aB as Yr,aH as Qr,dV as Xr,aI as Zr,ag as eo,dW as to,dX as so,dY as no,dZ as ao,d_ as gt,d$ as ge,e0 as pt,e1 as ro,e2 as oo,e3 as io,e4 as co,aW as uo,ak as lo,e5 as fo,e6 as ho,e7 as mo,e8 as go,e9 as po,ea as yo,eb as bo,ec as wo,ed as _o,ee as xo,ef as Eo,eg as vo,eh as Po,ei as So,ej as Io,ek as To,el as Co,em as Ao,en as Ro,eo as Bo,ep as Lo,eq as ko,er as Mo,es as qo,et as Oo,eu as Fo,ev as No,ew as Ho,ex as jo,ey as Do,ez as Uo,eA as zo,eB as Go,eC as $o,eD as Vo,eE as Wo,eF as Ko,eG as Jo,eH as Yo,eI as Qo,eJ as Xo,eK as Zo,eL as ei,eM as ti,eN as si,eO as ni,eP as ai,eQ as ri,eR as oi,eS as ii,eT as ci,eU as ui,eV as di,eW as li,eX as fi,eY as hi,eZ as mi,e_ as gi,e$ as pi,f0 as yi,f1 as bi,f2 as wi,f3 as _i,f4 as xi,f5 as Ei,f6 as vi,f7 as Pi,f8 as Si,f9 as Ii,fa as Ti,fb as Ci,fc as Ai,fd as Ri,fe as Bi,ff as Li,fg as ki,fh as Mi,fi as qi,fj as Oi,fk as Fi,fl as Ni,fm as Hi,fn as ji,fo as Di,fp as Ui,fq as zi,fr as Gi,fs as $i,ft as Vi,fu as Wi,fv as Ki,fw as Ji,fx as Yi,fy as Qi,fz as Xi,fA as Zi,fB as ec,fC as tc,fD as sc,fE as nc,az as ac,fF as rc,fG as oc,fH as ic,fI as cc,fJ as uc,fK as dc,fL as lc,fM as fc,fN as hc,fO as yt,fP as mc,fQ as gc,fR as pc,aT as yc,q as bc,s as wc,fS as _c,fT as bt,fU as xc,fV as Ec,fW as vc,fX as Pc,aa as Sc,fY as Ic,af as C,am as Tc,ai as Cc,k as Ac}from"./index-E8K9zNcO.js";import{d as Rc}from"./index-CxK_otpt.js";import{b as Bc,d as tt,p as ds,f as ls,w as Lc,g as kc,h as Mc,B as qc,W as Oc,c as Fc,e as Nc,a as wt,n as Hc,s as jc,z as Dc}from"./parseSignature-50acdY9s.js";import{f as Uc,s as zc}from"./fallback-Dvo0UqNy.js";import{ccipRequest as _t,offchainLookup as Gc,offchainLookupAbiItem as $c,offchainLookupSignature as Vc}from"./ccip-CMXqjBZh.js";function Wc(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Kc(e){let t;if(typeof e=="string")t=dt(e,{modifiers:lt});else{const n=Ds(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(!Us(r)){t=dt(r,{modifiers:lt,structs:n});break}}}if(!t)throw new Bt({param:e});return t}function Ve(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Jc(e){return e.opcode==="CREATE2"?hs(e):fs(e)}function fs(e){const t=D(H(e.from));let n=D(e.nonce);return n[0]===0&&(n=new Uint8Array([])),H(`0x${ee(U([t,n],"bytes")).slice(26)}`)}function hs(e){const t=D(H(e.from)),n=Lt(Ve(e.salt)?e.salt:D(e.salt),{size:32}),s="bytecodeHash"in e?Ve(e.bytecodeHash)?e.bytecodeHash:D(e.bytecodeHash):ee(e.bytecode,"bytes");return H(We(ee(kt([D("0xff"),t,n,s])),12))}function ms(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:s}=n,a=n.address;if(!$(a))throw new V({address:a});if(s<0)throw new se({chainId:s})}ie(e)}function gs(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new zs;for(const n of t){const s=Ke(n),a=B(We(n,0,1));if(s!==32)throw new Gs({hash:n,size:s});if(a!==$s)throw new Vs({hash:n,version:a})}}ie(e)}function ie(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:s,to:a}=e;if(t<=0)throw new se({chainId:t});if(a&&!$(a))throw new V({address:a});if(s&&s>Pe)throw new Se({maxFeePerGas:s});if(n&&s&&n>s)throw new Mt({maxFeePerGas:s,maxPriorityFeePerGas:n})}function st(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:a,to:r}=e;if(t<=0)throw new se({chainId:t});if(r&&!$(r))throw new V({address:r});if(n||a)throw new ne("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(s&&s>Pe)throw new Se({maxFeePerGas:s})}function nt(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:a,to:r}=e;if(r&&!$(r))throw new V({address:r});if(typeof t<"u"&&t<=0)throw new se({chainId:t});if(n||a)throw new ne("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(s&&s>Pe)throw new Se({maxFeePerGas:s})}function ce(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:s,storageKeys:a}=e[n];for(let r=0;r<a.length;r++)if(a[r].length-2!==64)throw new qt({storageKey:a[r]});if(!$(s,{strict:!1}))throw new V({address:s});t.push([s,a])}return t}function ps(e,t){const n=Ot(e);return n==="eip1559"?Xc(e,t):n==="eip2930"?Zc(e,t):n==="eip4844"?Qc(e,t):n==="eip7702"?Yc(e,t):eu(e,t)}function Yc(e,t){const{authorizationList:n,chainId:s,gas:a,nonce:r,to:o,value:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;ms(e);const h=ce(l),d=tu(n);return ae(["0x04",U([p(s),r?p(r):"0x",u?p(u):"0x",i?p(i):"0x",a?p(a):"0x",o??"0x",c?p(c):"0x",f??"0x",h,d,...ue(e,t)])])}function Qc(e,t){const{chainId:n,gas:s,nonce:a,to:r,value:o,maxFeePerBlobGas:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;gs(e);let h=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof d>"u")){const x=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(E=>z(E)),A=e.kzg,v=Ft({blobs:x,kzg:A});if(typeof h>"u"&&(h=Nt({commitments:v})),typeof d>"u"){const E=Ht({blobs:x,commitments:v,kzg:A});d=Je({blobs:x,commitments:v,proofs:E})}}const m=ce(l),g=[p(n),a?p(a):"0x",u?p(u):"0x",i?p(i):"0x",s?p(s):"0x",r??"0x",o?p(o):"0x",f??"0x",m,c?p(c):"0x",h??[],...ue(e,t)],y=[],_=[],b=[];if(d)for(let x=0;x<d.length;x++){const{blob:A,commitment:v,proof:E}=d[x];y.push(A),_.push(v),b.push(E)}return ae(["0x03",d?U([g,y,_,b]):U(g)])}function Xc(e,t){const{chainId:n,gas:s,nonce:a,to:r,value:o,maxFeePerGas:c,maxPriorityFeePerGas:i,accessList:u,data:l}=e;ie(e);const f=ce(u),h=[p(n),a?p(a):"0x",i?p(i):"0x",c?p(c):"0x",s?p(s):"0x",r??"0x",o?p(o):"0x",l??"0x",f,...ue(e,t)];return ae(["0x02",U(h)])}function Zc(e,t){const{chainId:n,gas:s,data:a,nonce:r,to:o,value:c,accessList:i,gasPrice:u}=e;st(e);const l=ce(i),f=[p(n),r?p(r):"0x",u?p(u):"0x",s?p(s):"0x",o??"0x",c?p(c):"0x",a??"0x",l,...ue(e,t)];return ae(["0x01",U(f)])}function eu(e,t){const{chainId:n=0,gas:s,data:a,nonce:r,to:o,value:c,gasPrice:i}=e;nt(e);let u=[r?p(r):"0x",i?p(i):"0x",s?p(s):"0x",o??"0x",c?p(c):"0x",a??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new Ye({v:t.v});return d})(),f=K(t.r),h=K(t.s);u=[...u,p(l),f==="0x00"?"0x":f,h==="0x00"?"0x":h]}else n>0&&(u=[...u,p(n),"0x","0x"]);return U(u)}function ue(e,t){const n=t??e,{v:s,yParity:a}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof s>"u"&&typeof a>"u")return[];const r=K(n.r),o=K(n.s);return[typeof a=="number"?a?p(1):"0x":s===0n?"0x":s===1n?p(1):s===27n?"0x":p(1),r==="0x00"?"0x":r,o==="0x00"?"0x":o]}function tu(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:s,nonce:a,...r}=n,o=n.address;t.push([s?Ee(s):"0x",o,a?Ee(a):"0x",...ue({},r)])}return t}function su({chains:e,id:t}){return e.find(n=>n.id===t)}function at(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new jt(e);return Q(e)}return e})(),s=Ue(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ys(s,t)}function ys(e,t="hex"){if(e.bytes.length===0)return t==="hex"?z(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const a=xt(e,n,128),r=e.readBytes(a);return t==="hex"?z(r):r}const s=xt(e,n,192);return nu(e,s,t)}function xt(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new ne("Invalid RLP prefix")}function nu(e,t,n){const s=e.position,a=[];for(;e.position-s<t;)a.push(ys(e,n));return a}function bs(e){return w(e)&&Ke(e)===32}const au=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ws=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),ru=ws.map(e=>(9*e+5)%16),_s=(()=>{const n=[[ws],[ru]];for(let s=0;s<4;s++)for(let a of n)a.push(a[s].map(r=>au[r]));return n})(),xs=_s[0],Es=_s[1],vs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),ou=xs.map((e,t)=>e.map(n=>vs[t][n])),iu=Es.map((e,t)=>e.map(n=>vs[t][n])),cu=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),uu=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function Et(e,t,n,s){return e===0?t^n^s:e===1?t&n|~t&s:e===2?(t|~n)^s:e===3?t&s|n&~s:t^(n|~s)}const pe=new Uint32Array(16);class du extends Ks{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:s,h3:a,h4:r}=this;return[t,n,s,a,r]}set(t,n,s,a,r){this.h0=t|0,this.h1=n|0,this.h2=s|0,this.h3=a|0,this.h4=r|0}process(t,n){for(let d=0;d<16;d++,n+=4)pe[d]=t.getUint32(n,!0);let s=this.h0|0,a=s,r=this.h1|0,o=r,c=this.h2|0,i=c,u=this.h3|0,l=u,f=this.h4|0,h=f;for(let d=0;d<5;d++){const m=4-d,g=cu[d],y=uu[d],_=xs[d],b=Es[d],x=ou[d],A=iu[d];for(let v=0;v<16;v++){const E=me(s+Et(d,r,c,u)+pe[_[v]]+g,x[v])+f|0;s=f,f=u,u=me(c,10)|0,c=r,r=E}for(let v=0;v<16;v++){const E=me(a+Et(m,o,i,l)+pe[b[v]]+y,A[v])+h|0;a=h,h=l,l=me(i,10)|0,i=o,o=E}}this.set(this.h1+c+l|0,this.h2+u+h|0,this.h3+f+a|0,this.h4+s+o|0,this.h0+r+i|0)}roundClean(){ft(pe)}destroy(){this.destroyed=!0,ft(this.buffer),this.set(0,0,0,0,0)}}const lu=Ws(()=>new du),fu=lu;function hu(e,t){const n=t||"hex",s=fu(w(e,{strict:!1})?D(e):e);return n==="bytes"?s:Ee(s)}const Ne=new Map;async function mu(e){const{getSocket:t,keepAlive:n=!0,key:s="socket",reconnect:a=!0,url:r}=e,{interval:o=3e4}=typeof n=="object"?n:{},{attempts:c=5,delay:i=2e3}=typeof a=="object"?a:{},u=JSON.stringify({keepAlive:n,key:s,url:r,reconnect:a});let l=Ne.get(u);if(l)return l;let f=0;const{schedule:h}=Js({id:u,fn:async()=>{const g=new Map,y=new Map;let _,b,x,A=!1;function v(){if(a&&f<c){if(A)return;A=!0,f++,b==null||b.close(),setTimeout(async()=>{await E().catch(console.error),A=!1},i)}else g.clear(),y.clear()}async function E(){const P=await t({onClose(){var S,L;for(const T of g.values())(S=T.onError)==null||S.call(T,new te({url:r}));for(const T of y.values())(L=T.onError)==null||L.call(T,new te({url:r}));v()},onError(S){var L,T;_=S;for(const R of g.values())(L=R.onError)==null||L.call(R,_);for(const R of y.values())(T=R.onError)==null||T.call(R,_);v()},onOpen(){_=void 0,f=0},onResponse(S){const L=S.method==="eth_subscription",T=L?S.params.subscription:S.id,R=L?y:g,M=R.get(T);M&&M.onResponse(S),L||R.delete(T)}});if(b=P,n&&(x&&clearInterval(x),x=setInterval(()=>{var S;return(S=b.ping)==null?void 0:S.call(b)},o)),a&&y.size>0){const S=y.entries();for(const[L,{onResponse:T,body:R,onError:M}]of S)R&&(y.delete(L),l==null||l.request({body:R,onResponse:T,onError:M}))}return P}return await E(),_=void 0,l={close(){x&&clearInterval(x),b.close(),Ne.delete(u)},get socket(){return b},request({body:P,onError:S,onResponse:L}){_&&S&&S(_);const T=P.id??Ys.take(),R=M=>{var ut;typeof M.id=="number"&&T!==M.id||(P.method==="eth_subscribe"&&typeof M.result=="string"&&y.set(M.result,{onResponse:R,onError:S,body:P}),P.method==="eth_unsubscribe"&&y.delete((ut=P.params)==null?void 0:ut[0]),L(M))};g.set(T,{onResponse:R,onError:S});try{b.request({body:{jsonrpc:"2.0",id:T,...P}})}catch(M){S==null||S(M)}},requestAsync({body:P,timeout:S=1e4}){return Dt(()=>new Promise((L,T)=>this.request({body:P,onError:T,onResponse:L})),{errorInstance:new Ut({body:P,url:r}),timeout:S})},requests:g,subscriptions:y,url:r},Ne.set(u,l),[l]}}),[d,[m]]=await h();return m}async function xe(e,t={}){const{keepAlive:n,reconnect:s}=t;return mu({async getSocket({onClose:a,onError:r,onOpen:o,onResponse:c}){const i=await Qs(()=>import("./native-OH5J7ZFM.js"),__vite__mapDeps([0,1,2])).then(d=>d.WebSocket),u=new i(e);function l(){u.removeEventListener("close",l),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",o),a()}function f({data:d}){try{const m=JSON.parse(d);c(m)}catch(m){r(m)}}u.addEventListener("close",l),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",o),u.readyState===i.CONNECTING&&await new Promise((d,m)=>{u&&(u.onopen=d,u.onerror=m)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),l()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new ze({url:u.url,cause:new te({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new ze({body:d,url:u.url,cause:new te({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:n,reconnect:s,url:e})}async function gu(e){const t=await xe(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function Ps(e){return Qe(e,-32)===Bc}function Ss(e){return Xs(e)}function pu(e){if(!Ps(e))return{signature:e};const[t,n,s]=Xe([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:s}}function yu(e){if(!Ss(e))return{signature:e};const{authorization:t,to:n,...s}=Zs(e);return{authorization:{address:t.address,chainId:t.chainId,nonce:Number(t.nonce),r:p(t.r,{size:32}),s:p(t.s,{size:32}),yParity:t.yParity},...n?{address:n}:{},...s}}async function Is({message:e,signature:t}){return re({hash:zt(e),signature:t})}async function Ts(e){const{domain:t,message:n,primaryType:s,signature:a,types:r}=e;return re({hash:Gt({domain:t,message:n,primaryType:s,types:r}),signature:a})}function bu(e){const{address:t,data:n,signature:s,to:a="hex"}=e,r=en({authorization:{address:e.authorization.address,chainId:e.authorization.chainId,nonce:BigInt(e.authorization.nonce),r:BigInt(e.authorization.r),s:BigInt(e.authorization.s),yParity:e.authorization.yParity},data:n,signature:s,to:t});return a==="hex"?r:Q(r)}async function wu({address:e,hash:t,signature:n}){return Ie(H(e),await re({hash:t,signature:n}))}async function _u({address:e,message:t,signature:n}){return Ie(H(e),await Is({message:t,signature:n}))}async function xu(e){const{address:t,domain:n,message:s,primaryType:a,signature:r,types:o}=e;return Ie(H(t),await Ts({domain:n,message:s,primaryType:a,signature:r,types:o}))}function Cs(e){const t=Qe(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&B(t)>=192)return"legacy";throw new $t({serializedType:t})}function As(e){const t=Cs(e);return t==="eip1559"?Pu(e):t==="eip2930"?Su(e):t==="eip4844"?vu(e):t==="eip7702"?Eu(e):Iu(e)}function Eu(e){const t=Ce(e),[n,s,a,r,o,c,i,u,l,f,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new X({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,authorizationList:f,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:B(n),type:"eip7702"};return w(c)&&c!=="0x"&&(g.to=c),w(o)&&o!=="0x"&&(g.gas=I(o)),w(u)&&u!=="0x"&&(g.data=u),w(s)&&(g.nonce=s==="0x"?0:B(s)),w(i)&&i!=="0x"&&(g.value=I(i)),w(r)&&r!=="0x"&&(g.maxFeePerGas=I(r)),w(a)&&a!=="0x"&&(g.maxPriorityFeePerGas=I(a)),l.length!==0&&l!=="0x"&&(g.accessList=Ae(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=Tu(f)),ms(g),{...t.length===13?de(t):void 0,...g}}function vu(e){const t=Ce(e),n=t.length===4,s=n?t[0]:t,a=n?t.slice(1):[],[r,o,c,i,u,l,f,h,d,m,g,y,_,b]=s,[x,A,v]=a;if(!(s.length===11||s.length===14))throw new X({attributes:{chainId:r,nonce:o,maxPriorityFeePerGas:c,maxFeePerGas:i,gas:u,to:l,value:f,data:h,accessList:d,...s.length>9?{v:y,r:_,s:b}:{}},serializedTransaction:e,type:"eip4844"});const E={blobVersionedHashes:g,chainId:B(r),type:"eip4844"};return w(l)&&l!=="0x"&&(E.to=l),w(u)&&u!=="0x"&&(E.gas=I(u)),w(h)&&h!=="0x"&&(E.data=h),w(o)&&(E.nonce=o==="0x"?0:B(o)),w(f)&&f!=="0x"&&(E.value=I(f)),w(m)&&m!=="0x"&&(E.maxFeePerBlobGas=I(m)),w(i)&&i!=="0x"&&(E.maxFeePerGas=I(i)),w(c)&&c!=="0x"&&(E.maxPriorityFeePerGas=I(c)),d.length!==0&&d!=="0x"&&(E.accessList=Ae(d)),x&&A&&v&&(E.sidecars=Je({blobs:x,commitments:A,proofs:v})),gs(E),{...s.length===14?de(s):void 0,...E}}function Pu(e){const t=Ce(e),[n,s,a,r,o,c,i,u,l,f,h,d]=t;if(!(t.length===9||t.length===12))throw new X({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,...t.length>9?{v:f,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:B(n),type:"eip1559"};return w(c)&&c!=="0x"&&(m.to=c),w(o)&&o!=="0x"&&(m.gas=I(o)),w(u)&&u!=="0x"&&(m.data=u),w(s)&&(m.nonce=s==="0x"?0:B(s)),w(i)&&i!=="0x"&&(m.value=I(i)),w(r)&&r!=="0x"&&(m.maxFeePerGas=I(r)),w(a)&&a!=="0x"&&(m.maxPriorityFeePerGas=I(a)),l.length!==0&&l!=="0x"&&(m.accessList=Ae(l)),ie(m),{...t.length===12?de(t):void 0,...m}}function Su(e){const t=Ce(e),[n,s,a,r,o,c,i,u,l,f,h]=t;if(!(t.length===8||t.length===11))throw new X({attributes:{chainId:n,nonce:s,gasPrice:a,gas:r,to:o,value:c,data:i,accessList:u,...t.length>8?{v:l,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:B(n),type:"eip2930"};return w(o)&&o!=="0x"&&(d.to=o),w(r)&&r!=="0x"&&(d.gas=I(r)),w(i)&&i!=="0x"&&(d.data=i),w(s)&&(d.nonce=s==="0x"?0:B(s)),w(c)&&c!=="0x"&&(d.value=I(c)),w(a)&&a!=="0x"&&(d.gasPrice=I(a)),u.length!==0&&u!=="0x"&&(d.accessList=Ae(u)),st(d),{...t.length===11?de(t):void 0,...d}}function Iu(e){const t=at(e,"hex"),[n,s,a,r,o,c,i,u,l]=t;if(!(t.length===6||t.length===9))throw new X({attributes:{nonce:n,gasPrice:s,gas:a,to:r,value:o,data:c,...t.length>6?{v:i,r:u,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(w(r)&&r!=="0x"&&(f.to=r),w(a)&&a!=="0x"&&(f.gas=I(a)),w(c)&&c!=="0x"&&(f.data=c),w(n)&&(f.nonce=n==="0x"?0:B(n)),w(o)&&o!=="0x"&&(f.value=I(o)),w(s)&&s!=="0x"&&(f.gasPrice=I(s)),nt(f),t.length===6)return f;const h=w(i)&&i!=="0x"?I(i):0n;if(l==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const d=h,m=Number((d-35n)/2n);if(m>0)f.chainId=m;else if(d!==27n&&d!==28n)throw new Ye({v:d});return f.v=d,f.s=l,f.r=u,f.yParity=d%2n===0n?1:0,f}function Ce(e){return at(`0x${e.slice(4)}`,"hex")}function Ae(e){const t=[];for(let n=0;n<e.length;n++){const[s,a]=e[n];if(!$(s,{strict:!1}))throw new V({address:s});t.push({address:s,storageKeys:a.map(r=>bs(r)?r:K(r))})}return t}function Tu(e){const t=[];for(let n=0;n<e.length;n++){const[s,a,r,o,c,i]=e[n];t.push({address:a,chainId:s==="0x"?0:B(s),nonce:r==="0x"?0:B(r),...de([o,c,i])})}return t}function de(e){const t=e.slice(-3),n=t[0]==="0x"||I(t[0])===0n?27n:28n;return{r:Ge(t[1],{size:32}),s:Ge(t[2],{size:32}),v:n,yParity:n===27n?0:1}}class Rs extends ne{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function rt(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Rs({value:e});let[n,s="0"]=e.split(".");const a=n.startsWith("-");if(a&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){const[r,o,c]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],i=Math.round(+`${o}.${c}`);i>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${i}`,s.length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${s}`)}function Cu(e,t="wei"){return rt(e,Vt[t])}function Au(e,t="wei"){return rt(e,Wt[t])}async function Ru(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Bu(e){return e.request({method:`${e.mode}_dumpState`})}async function Lu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function ku(e){return await e.request({method:"txpool_content"})}async function Mu(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:B(t),queued:B(n)}}async function qu(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Ou(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[p(t)]})}async function Fu(e){return await e.request({method:"txpool_inspect"})}async function Nu(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Hu(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:p(t)}]}):await e.request({method:`${e.mode}_mine`,params:[p(t),p(n||0)]})}async function ju(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Du(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function Uu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function zu(e,t){var _,b,x;const{accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f,...h}=t,d=(x=(b=(_=e.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,g=(d||Ze)({...tn(h,{format:d}),accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function Gu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function $u(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,p(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,p(n)]})}async function Vu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[p(t)]})}async function Wu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function Ku(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function Ju(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Yu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function Qu(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Xu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[p(t)]})}async function Zu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[p(t)]})}async function ed(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[p(t)]})}async function td(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,p(n)]})}async function sd(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function nd(e,{address:t,index:n,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?p(n):n,s]})}async function ad(e){return await e.request({method:"evm_snapshot"})}async function rd(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function od(e,{chain:t}){const{id:n,name:s,nativeCurrency:a,rpcUrls:r,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:p(n),chainName:s,nativeCurrency:a,rpcUrls:r.default.http,blockExplorerUrls:o?Object.values(o).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function id(e,t){const{abi:n,args:s,bytecode:a,...r}=t,o=Kt({abi:n,args:s,bytecode:a});return tt(e,{...r,...r.authorizationList?{to:null}:{},data:o})}async function cd(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>Jt(s))}async function ud(e,t={}){const{account:n=e.account,chainId:s}=t,a=n?oe(n):void 0,r=s?[a==null?void 0:a.address,[p(s)]]:[a==null?void 0:a.address],o=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[i,u]of Object.entries(o)){c[Number(i)]={};for(let[l,f]of Object.entries(u))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(i)][l]=f}return typeof s=="number"?c[s]:c}async function dd(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function ld(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>H(n))}async function fd(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function hd(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function md(e,t){const{account:n=e.account}=t;if(!n)throw new Te({docsPath:"/docs/eip7702/signAuthorization"});const s=oe(n);if(!s.signAuthorization)throw new sn({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const a=await ds(e,t);return s.signAuthorization(a)}async function gd(e,t){var u,l,f,h;const{account:n=e.account,chain:s=e.chain,...a}=t;if(!n)throw new Te({docsPath:"/docs/actions/wallet/signTransaction"});const r=oe(n);Yt({account:r,...t});const o=await N(e,Qt,"getChainId")({});s!==null&&ls({currentChainId:o,chain:s});const c=(s==null?void 0:s.formatters)||((u=e.chain)==null?void 0:u.formatters),i=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||Ze;return r.signTransaction?r.signTransaction({...a,chainId:o},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...i(a),chainId:p(o),from:r.address}]},{retryCount:0})}async function pd(e,t){const{account:n=e.account,domain:s,message:a,primaryType:r}=t;if(!n)throw new Te({docsPath:"/docs/actions/wallet/signTypedData"});const o=oe(n),c={EIP712Domain:Xt({domain:s}),...t.types};if(Zt({domain:s,message:a,primaryType:r,types:c}),o.signTypedData)return o.signTypedData({domain:s,message:a,primaryType:r,types:c});const i=es({domain:s,message:a,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[o.address,i]},{retryCount:0})}async function yd(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:p(t)}]},{retryCount:0})}async function bd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Bs(e,t){const{abi:n,account:s=e.account,address:a,args:r,dataSuffix:o,functionName:c,...i}=t;if(typeof s>"u")throw new Te({docsPath:"/docs/contract/writeContract"});const u=s?oe(s):null,l=ts({abi:n,args:r,functionName:c});try{return await N(e,tt,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:a,account:u,...i})}catch(f){throw ss(f,{abi:n,address:a,args:r,docsPath:"/docs/contract/writeContract",functionName:c,sender:u==null?void 0:u.address})}}function wd({abi:e,address:t,client:n}){const s=n,[a,r]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],o=a!=null,c=r!=null,i={};let u=!1,l=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:l=!0:h.type==="event"&&(f=!0),u&&l&&f)break;return o&&(u&&(i.read=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=ye(m);return N(a,nn,"readContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),l&&(i.simulate=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=ye(m);return N(a,an,"simulateContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),f&&(i.createEventFilter=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=He(m,g);return N(a,rn,"createContractEventFilter")({abi:e,address:t,eventName:d,args:y,..._})}}}),i.getEvents=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=He(m,g);return N(a,on,"getContractEvents")({abi:e,address:t,eventName:d,args:y,..._})}}}),i.watchEvent=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(b=>b.type==="event"&&b.name===d),{args:y,options:_}=He(m,g);return N(a,cn,"watchContractEvent")({abi:e,address:t,eventName:d,args:y,..._})}}}))),c&&l&&(i.write=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=ye(m);return N(r,Bs,"writeContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),(o||c)&&l&&(i.estimateGas=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=ye(m);return N(a??r,un,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...y,account:y.account??r.account})}}})),i.address=t,i.abi=e,i}function ye(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:n,options:s}}function He(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(r=>r.indexed):e.length===2&&(n=!0);const s=n?e[0]:void 0,a=(n?e[1]:e[0])??{};return{args:s,options:a}}function Ls({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:s=>Ru(n,s),dumpState:()=>Bu(n),getAutomine:()=>Lu(n),getTxpoolContent:()=>ku(n),getTxpoolStatus:()=>Mu(n),impersonateAccount:s=>qu(n,s),increaseTime:s=>Ou(n,s),inspectTxpool:()=>Fu(n),loadState:s=>Nu(n,s),mine:s=>Hu(n,s),removeBlockTimestampInterval:()=>ju(n),reset:s=>Du(n,s),revert:s=>Uu(n,s),sendUnsignedTransaction:s=>zu(n,s),setAutomine:s=>Gu(n,s),setBalance:s=>$u(n,s),setBlockGasLimit:s=>Vu(n,s),setBlockTimestampInterval:s=>Wu(n,s),setCode:s=>Ku(n,s),setCoinbase:s=>Ju(n,s),setIntervalMining:s=>Yu(n,s),setLoggingEnabled:s=>Qu(n,s),setMinGasPrice:s=>Xu(n,s),setNextBlockBaseFeePerGas:s=>Zu(n,s),setNextBlockTimestamp:s=>ed(n,s),setNonce:s=>td(n,s),setRpcUrl:s=>sd(n,s),setStorageAt:s=>nd(n,s),snapshot:()=>ad(n),stopImpersonatingAccount:s=>rd(n,s)}}}function _d(e){const{key:t="test",name:n="Test Client",mode:s}=e;return et({...e,key:t,name:n,type:"testClient"}).extend(r=>({mode:s,...Ls({mode:s})(r)}))}function ks(e){return{addChain:t=>od(e,t),deployContract:t=>id(e,t),getAddresses:()=>cd(e),getCallsStatus:t=>Mc(e,t),getCapabilities:t=>ud(e,t),getChainId:()=>Qt(e),getPermissions:()=>dd(e),prepareAuthorization:t=>ds(e,t),prepareTransactionRequest:t=>fn(e,t),requestAddresses:()=>ld(e),requestPermissions:t=>fd(e,t),sendCalls:t=>kc(e,t),sendRawTransaction:t=>ln(e,t),sendTransaction:t=>tt(e,t),showCallsStatus:t=>hd(e,t),signAuthorization:t=>md(e,t),signMessage:t=>dn(e,t),signTransaction:t=>gd(e,t),signTypedData:t=>pd(e,t),switchChain:t=>yd(e,t),waitForCallsStatus:t=>Lc(e,t),watchAsset:t=>bd(e,t),writeContract:t=>Bs(e,t)}}function xd(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return et({...e,key:t,name:n,transport:s,type:"walletClient"}).extend(ks)}function Ed(e,t={}){const{keepAlive:n,key:s="webSocket",methods:a,name:r="WebSocket JSON-RPC",reconnect:o,retryDelay:c}=t;return({chain:i,retryCount:u,timeout:l})=>{var g;const f=t.retryCount??u,h=l??t.timeout??1e4,d=e||((g=i==null?void 0:i.rpcUrls.default.webSocket)==null?void 0:g[0]),m={keepAlive:n,reconnect:o};if(!d)throw new ns;return as({key:s,methods:a,name:r,async request({method:y,params:_}){const b={method:y,params:_},x=await xe(d,m),{error:A,result:v}=await x.requestAsync({body:b,timeout:h});if(A)throw new rs({body:b,error:A,url:d});return v},retryCount:f,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return gu(d)},getRpcClient(){return xe(d,m)},async subscribe({params:y,onData:_,onError:b}){const x=await xe(d,m),{result:A}=await new Promise((v,E)=>x.request({body:{method:"eth_subscribe",params:y},onError(P){E(P),b==null||b(P)},onResponse(P){if(P.error){E(P.error),b==null||b(P.error);return}if(typeof P.id=="number"){v(P);return}P.method==="eth_subscription"&&_(P.params)}}));return{subscriptionId:A,async unsubscribe(){return new Promise(v=>x.request({body:{method:"eth_unsubscribe",params:[A]},onResponse:v}))}}}})}}class vd extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const je="/docs/contract/decodeDeployData";function Pd(e){const{abi:t,bytecode:n,data:s}=e;if(s===n)return{bytecode:n};const a=t.find(o=>"type"in o&&o.type==="constructor");if(!a)throw new os({docsPath:je});if(!("inputs"in a))throw new $e({docsPath:je});if(!a.inputs||a.inputs.length===0)throw new $e({docsPath:je});return{args:Xe(a.inputs,`0x${s.replace(n,"")}`),bytecode:n}}function Sd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(c=>Q(c)):e.blobs,s=n.reduce((c,i)=>c+i.length,0),a=Ue(new Uint8Array(s));let r=!0;for(const c of n){const i=Ue(c);for(;r&&i.position<c.length;){i.incrementPosition(1);let u=31;c.length-i.position<31&&(u=c.length-i.position);for(const l in Array.from({length:u})){const f=i.readByte();if(f===128&&!i.inspectBytes(i.remaining).includes(128)){r=!1;break}a.pushByte(f)}}}const o=a.bytes.slice(0,a.position);return t==="hex"?z(o):o}function Id(e){const{sidecars:t,version:n}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),a=[];for(const{commitment:r}of t)a.push(is({commitment:r,to:s,version:n}));return a}const Td=2147483648;function Cd(e){if(e===1)return 60n;if(e>=Td||e<0)throw new cs({chainId:e});return BigInt((2147483648|e)>>>0)}function Ms({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Ad(e,t){try{e.loadTrustedSetup(t)}catch(n){const s=n;if(!s.message.includes("trusted setup is already loaded"))throw s}return Ms(e)}function Rd({r:e,yParityAndS:t}){const n=Q(t),s=n[0]&128?1:0,a=n;return s===1&&(a[0]&=127),{r:e,s:z(a),yParity:s}}function vt(e){const{r:t,s:n}=us.Signature.fromCompact(e.slice(2,130));return{r:p(t,{size:32}),yParityAndS:p(n,{size:32})}}async function Bd(e){const{serializedTransaction:t,signature:n}=e,s=As(t),a=n??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},r=ps({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await re({hash:ee(r),signature:a})}function Pt({r:e,yParityAndS:t}){return`0x${new us.Signature(I(e),I(t)).toCompactHex()}`}function Ld(e){const{r:t,s:n,v:s,yParity:a}=e,r=Number(a??s-27n);let o=n;if(r===1){const c=Q(n);c[0]|=128,o=z(c)}return{r:t,yParityAndS:o}}const kd=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:os,AbiConstructorParamsNotFoundError:$e,AbiDecodingDataSizeInvalidError:hn,AbiDecodingDataSizeTooSmallError:mn,AbiDecodingZeroDataError:gn,AbiEncodingArrayLengthMismatchError:pn,AbiEncodingBytesSizeMismatchError:yn,AbiEncodingLengthMismatchError:bn,AbiErrorInputsNotFoundError:wn,AbiErrorNotFoundError:_n,AbiErrorSignatureNotFoundError:xn,AbiEventNotFoundError:En,AbiEventSignatureEmptyTopicsError:vn,AbiEventSignatureNotFoundError:Pn,AbiFunctionNotFoundError:Sn,AbiFunctionOutputsNotFoundError:In,AbiFunctionSignatureNotFoundError:Tn,AccountStateConflictError:Cn,AtomicReadyWalletRejectedUpgradeError:An,AtomicityNotSupportedError:Rn,BaseError:ne,BaseFeeScalarError:Bn,BlockNotFoundError:Ln,BundleFailedError:qc,BundleTooLargeError:kn,BytesSizeMismatchError:Mn,CallExecutionError:qn,ChainDisconnectedError:On,ChainDoesNotSupportContract:Fn,ChainMismatchError:Nn,ChainNotFoundError:Hn,CircularReferenceError:jn,ClientChainNotConfiguredError:Dn,ContractFunctionExecutionError:Un,ContractFunctionRevertedError:zn,ContractFunctionZeroDataError:Gn,CounterfactualDeploymentFailedError:$n,DecodeLogDataMismatch:Vn,DecodeLogTopicsMismatch:Wn,DuplicateIdError:Kn,EIP1193ProviderRpcError:vd,Eip1559FeesNotSupportedError:Jn,EnsAvatarInvalidNftUriError:Yn,EnsAvatarUnsupportedNamespaceError:Qn,EnsAvatarUriResolutionError:Xn,EnsInvalidChainIdError:cs,EstimateGasExecutionError:Zn,ExecutionRevertedError:ea,FeeCapTooHighError:Se,FeeCapTooLowError:ta,FeeConflictError:sa,FilterTypeNotSupportedError:na,HttpRequestError:aa,InsufficientFundsError:ra,IntegerOutOfRangeError:oa,InternalRpcError:ia,IntrinsicGasTooHighError:ca,IntrinsicGasTooLowError:ua,InvalidAbiDecodingTypeError:da,InvalidAbiEncodingTypeError:la,InvalidAbiItemError:fa,InvalidAbiParameterError:Bt,InvalidAbiParametersError:ha,InvalidAbiTypeParameterError:ma,InvalidAddressError:V,InvalidArrayError:ga,InvalidBytesBooleanError:pa,InvalidChainIdError:se,InvalidDecimalNumberError:Rs,InvalidDefinitionTypeError:ya,InvalidDomainError:ba,InvalidFunctionModifierError:wa,InvalidHexBooleanError:_a,InvalidHexValueError:jt,InvalidInputRpcError:xa,InvalidLegacyVError:Ye,InvalidModifierError:Ea,InvalidParameterError:va,InvalidParamsRpcError:Pa,InvalidParenthesisError:Sa,InvalidPrimaryTypeError:Ia,InvalidRequestRpcError:Ta,InvalidSerializableTransactionError:Ca,InvalidSerializedTransactionError:X,InvalidSerializedTransactionTypeError:$t,InvalidSignatureError:Aa,InvalidStorageKeySizeError:qt,InvalidStructSignatureError:Ra,InvalidStructTypeError:Ba,JsonRpcVersionUnsupportedError:La,LimitExceededRpcError:ka,MaxFeePerGasTooLowError:Ma,MethodNotFoundRpcError:qa,MethodNotSupportedRpcError:Oa,NonceMaxValueError:Fa,NonceTooHighError:Na,NonceTooLowError:Ha,ParseRpcError:ja,ProviderDisconnectedError:Da,ProviderRpcError:Ua,RawContractError:za,ResourceNotFoundRpcError:Ga,ResourceUnavailableRpcError:$a,RpcError:Va,RpcRequestError:rs,SizeExceedsPaddingSizeError:Wa,SizeOverflowError:Ka,SliceOffsetOutOfBoundsError:Ja,SocketClosedError:te,SolidityProtectedKeywordError:Ya,StateAssignmentConflictError:Qa,SwitchChainError:Xa,TimeoutError:Ut,TipAboveFeeCapError:Mt,TransactionExecutionError:Za,TransactionNotFoundError:er,TransactionReceiptNotFoundError:tr,TransactionRejectedRpcError:sr,TransactionTypeNotSupportedError:nr,UnauthorizedProviderError:ar,UnknownBundleIdError:rr,UnknownNodeError:or,UnknownRpcError:ir,UnknownSignatureError:cr,UnknownTypeError:ur,UnsupportedChainIdError:dr,UnsupportedNonOptionalCapabilityError:lr,UnsupportedPackedAbiType:fr,UnsupportedProviderMethodError:hr,UrlRequiredError:ns,UserRejectedRequestError:mr,WaitForCallsStatusTimeoutError:Oc,WaitForTransactionReceiptTimeoutError:gr,WebSocketRequestError:ze,assertCurrentChain:ls,assertRequest:Yt,assertTransactionEIP1559:ie,assertTransactionEIP2930:st,assertTransactionLegacy:nt,blobsToCommitments:Ft,blobsToProofs:Ht,boolToBytes:pr,boolToHex:yr,bytesToBigInt:br,bytesToBool:wr,bytesToHex:z,bytesToNumber:_r,bytesToRlp:xr,bytesToString:Er,ccipFetch:_t,ccipRequest:_t,checksumAddress:Jt,commitmentToVersionedHash:is,commitmentsToVersionedHashes:Nt,compactSignatureToHex:Pt,compactSignatureToSignature:Rd,concat:kt,concatBytes:vr,concatHex:ae,createClient:et,createNonceManager:Fc,createPublicClient:Pr,createTestClient:_d,createTransport:as,createWalletClient:xd,custom:Sr,decodeAbiParameters:Xe,decodeDeployData:Pd,decodeErrorResult:Ir,decodeEventLog:Tr,decodeFunctionData:Cr,decodeFunctionResult:Ar,defineBlock:Rr,defineChain:Br,defineKzg:Ms,defineTransaction:Lr,defineTransactionReceipt:kr,defineTransactionRequest:Mr,deploylessCallViaBytecodeBytecode:qr,deploylessCallViaFactoryBytecode:Or,domainSeparator:Fr,encodeAbiParameters:Nr,encodeDeployData:Kt,encodeErrorResult:Hr,encodeEventTopics:jr,encodeFunctionData:ts,encodeFunctionResult:Dr,encodePacked:Nc,erc1155Abi:Ur,erc20Abi:zr,erc20Abi_bytes32:Gr,erc4626Abi:$r,erc6492SignatureValidatorAbi:ht,erc6492SignatureValidatorByteCode:mt,erc721Abi:Vr,ethAddress:Wr,etherUnits:Vt,extractChain:su,fallback:Uc,formatBlock:Kr,formatEther:Jr,formatGwei:Yr,formatLog:Qr,formatTransaction:Xr,formatTransactionReceipt:Zr,formatTransactionRequest:Ze,formatUnits:eo,fromBlobs:Sd,fromBytes:to,fromHex:so,fromRlp:at,getAbiItem:no,getAddress:H,getChainContractAddress:ao,getContract:wd,getContractAddress:Jc,getContractError:ss,getCreate2Address:hs,getCreateAddress:fs,getEventSelector:gt,getEventSignature:ge,getFunctionSelector:pt,getFunctionSignature:ge,getSerializedTransactionType:Cs,getTransactionType:Ot,getTypesForEIP712Domain:Xt,gweiUnits:Wt,hashDomain:ro,hashMessage:zt,hashStruct:oo,hashTypedData:Gt,hexToBigInt:I,hexToBool:io,hexToBytes:Q,hexToCompactSignature:vt,hexToNumber:B,hexToRlp:co,hexToSignature:wt,hexToString:uo,http:lo,isAddress:$,isAddressEqual:Ie,isBytes:Ve,isErc6492Signature:Ps,isErc8010Signature:Ss,isHash:bs,isHex:w,keccak256:ee,labelhash:fo,maxInt104:ho,maxInt112:mo,maxInt120:go,maxInt128:po,maxInt136:yo,maxInt144:bo,maxInt152:wo,maxInt16:_o,maxInt160:xo,maxInt168:Eo,maxInt176:vo,maxInt184:Po,maxInt192:So,maxInt200:Io,maxInt208:To,maxInt216:Co,maxInt224:Ao,maxInt232:Ro,maxInt24:Bo,maxInt240:Lo,maxInt248:ko,maxInt256:Mo,maxInt32:qo,maxInt40:Oo,maxInt48:Fo,maxInt56:No,maxInt64:Ho,maxInt72:jo,maxInt8:Do,maxInt80:Uo,maxInt88:zo,maxInt96:Go,maxUint104:$o,maxUint112:Vo,maxUint120:Wo,maxUint128:Ko,maxUint136:Jo,maxUint144:Yo,maxUint152:Qo,maxUint16:Xo,maxUint160:Zo,maxUint168:ei,maxUint176:ti,maxUint184:si,maxUint192:ni,maxUint200:ai,maxUint208:ri,maxUint216:oi,maxUint224:ii,maxUint232:ci,maxUint24:ui,maxUint240:di,maxUint248:li,maxUint256:Pe,maxUint32:fi,maxUint40:hi,maxUint48:mi,maxUint56:gi,maxUint64:pi,maxUint72:yi,maxUint8:bi,maxUint80:wi,maxUint88:_i,maxUint96:xi,minInt104:Ei,minInt112:vi,minInt120:Pi,minInt128:Si,minInt136:Ii,minInt144:Ti,minInt152:Ci,minInt16:Ai,minInt160:Ri,minInt168:Bi,minInt176:Li,minInt184:ki,minInt192:Mi,minInt200:qi,minInt208:Oi,minInt216:Fi,minInt224:Ni,minInt232:Hi,minInt24:ji,minInt240:Di,minInt248:Ui,minInt256:zi,minInt32:Gi,minInt40:$i,minInt48:Vi,minInt56:Wi,minInt64:Ki,minInt72:Ji,minInt8:Yi,minInt80:Qi,minInt88:Xi,minInt96:Zi,multicall3Abi:ec,namehash:tc,nonceManager:Hc,numberToBytes:sc,numberToHex:p,offchainLookup:Gc,offchainLookupAbiItem:$c,offchainLookupSignature:Vc,pad:Lt,padBytes:nc,padHex:Ge,parseAbi:ac,parseAbiItem:rc,parseAbiParameter:Kc,parseAbiParameters:oc,parseCompactSignature:vt,parseErc6492Signature:pu,parseErc8010Signature:yu,parseEther:Cu,parseEventLogs:ic,parseGwei:Au,parseSignature:wt,parseTransaction:As,parseUnits:rt,prepareEncodeFunctionData:cc,presignMessagePrefix:uc,publicActions:dc,recoverAddress:re,recoverMessageAddress:Is,recoverPublicKey:lc,recoverTransactionAddress:Bd,recoverTypedDataAddress:Ts,ripemd160:hu,rpcSchema:fc,rpcTransactionType:hc,serializeAccessList:ce,serializeCompactSignature:Pt,serializeErc6492Signature:jc,serializeErc8010Signature:bu,serializeSignature:yt,serializeTransaction:ps,serializeTypedData:es,setErrorConfig:mc,setupKzg:Ad,sha256:gc,shouldThrow:zc,sidecarsToVersionedHashes:Id,signatureToCompactSignature:Ld,signatureToHex:yt,size:Ke,slice:We,sliceBytes:pc,sliceHex:Qe,stringToBytes:yc,stringToHex:bc,stringify:wc,testActions:Ls,toBlobSidecars:Je,toBlobs:_c,toBytes:D,toCoinType:Cd,toEventHash:bt,toEventSelector:gt,toEventSignature:ge,toFunctionHash:bt,toFunctionSelector:pt,toFunctionSignature:ge,toHex:Ee,toPrefixedMessage:xc,toRlp:U,transactionType:Ec,trim:K,universalSignatureValidatorAbi:ht,universalSignatureValidatorByteCode:mt,validateTypedData:Zt,verifyHash:wu,verifyMessage:_u,verifyTypedData:xu,walletActions:ks,webSocket:Ed,weiUnits:vc,withCache:Pc,withRetry:Sc,withTimeout:Dt,zeroAddress:Ic,zeroHash:Dc},Symbol.toStringTag,{value:"Module"}));var ot={},Re={},qs={},ve={},Os={},le={},fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.getSDKVersion=void 0;const Md=()=>"9.1.0";fe.getSDKVersion=Md;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.generateRequestId=void 0;const qd=e=>e.toString(16).padStart(2,"0"),Od=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,qd).join("")},Fd=()=>typeof window<"u"?Od(10):new Date().getTime().toString(36);Be.generateRequestId=Fd;Object.defineProperty(le,"__esModule",{value:!0});le.MessageFormatter=void 0;const Nd=fe,Hd=Be;class Le{}le.MessageFormatter=Le;Le.makeRequest=(e,t)=>({id:(0,Hd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Nd.getSDKVersion)()}});Le.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});Le.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var O={};Object.defineProperty(O,"__esModule",{value:!0});O.RestrictedMethods=O.Methods=void 0;var St;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(St||(O.Methods=St={}));var It;(function(e){e.requestAddressBook="requestAddressBook"})(It||(O.RestrictedMethods=It={}));(function(e){var t=C&&C.__createBinding||(Object.create?function(r,o,c,i){i===void 0&&(i=c);var u=Object.getOwnPropertyDescriptor(o,c);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(r,i,u)}:function(r,o,c,i){i===void 0&&(i=c),r[i]=o[c]}),n=C&&C.__exportStar||function(r,o){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&t(o,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const s=le;class a{constructor(o=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:i,data:u,source:l})=>{const f=!u,h=!this.isServer&&l===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),m=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(y=>y.test(i))!==void 0),!f&&h&&m&&g},this.logIncomingMessage=i=>{console.info(`Safe Apps SDK v1: A message was received from origin ${i.origin}. `,i.data)},this.onParentMessage=i=>{this.isValidMessage(i)&&(this.debugMode&&this.logIncomingMessage(i),this.handleIncomingMessage(i.data))},this.handleIncomingMessage=i=>{const{id:u}=i,l=this.callbacks.get(u);l&&(l(i),this.callbacks.delete(u))},this.send=(i,u)=>{const l=s.MessageFormatter.makeRequest(i,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,h)=>{this.callbacks.set(l.id,d=>{if(!d.success){h(new Error(d.error));return}f(d)})})},this.allowedOrigins=o,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=a,n(O,e)})(Os);var ke={},Me={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.isObjectEIP712TypedData=void 0;const jd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;qe.isObjectEIP712TypedData=jd;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var Ns={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Rc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Ns);var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});(function(e){var t=C&&C.__createBinding||(Object.create?function(s,a,r,o){o===void 0&&(o=r);var c=Object.getOwnPropertyDescriptor(a,r);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(s,o,c)}:function(s,a,r,o){o===void 0&&(o=r),s[o]=a[r]}),n=C&&C.__exportStar||function(s,a){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&t(a,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(qe,e),n(Fs,e),n(Ns,e),n(Hs,e)})(Me);Object.defineProperty(ke,"__esModule",{value:!0});ke.TXs=void 0;const be=O,Dd=Me;class Ud{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(be.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(be.Methods.signMessage,n)).data}async signTypedMessage(t){if(!(0,Dd.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(be.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(be.Methods.sendTransactions,s)).data}}ke.TXs=Ud;var Oe={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.RPC_CALLS=void 0;Z.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Eth=void 0;const k=Z,zd=O,F={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Gd{constructor(t){this.communicator=t,this.call=this.buildRequest({call:k.RPC_CALLS.eth_call,formatters:[null,F.defaultBlockParam]}),this.getBalance=this.buildRequest({call:k.RPC_CALLS.eth_getBalance,formatters:[null,F.defaultBlockParam]}),this.getCode=this.buildRequest({call:k.RPC_CALLS.eth_getCode,formatters:[null,F.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:k.RPC_CALLS.eth_getStorageAt,formatters:[null,F.blockNumberToHex,F.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:k.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByHash,formatters:[null,F.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByNumber,formatters:[F.blockNumberToHex,F.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionCount,formatters:[null,F.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:k.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:k.RPC_CALLS.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:k.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async a=>{s&&Array.isArray(a)&&s.forEach((c,i)=>{c&&(a[i]=c(a[i]))});const r={call:n,params:a||[]};return(await this.communicator.send(zd.Methods.rpcCall,r)).data}}}Oe.Eth=Gd;var Fe={};const $d=Tc(kd);var J={};Object.defineProperty(J,"__esModule",{value:!0});J.MAGIC_VALUE_BYTES=J.MAGIC_VALUE=void 0;const Vd="0x1626ba7e";J.MAGIC_VALUE=Vd;const Wd="0x20c13b0b";J.MAGIC_VALUE_BYTES=Wd;var it={},he={},G={};Object.defineProperty(G,"__esModule",{value:!0});G.PermissionsError=G.PERMISSIONS_REQUEST_REJECTED=void 0;G.PERMISSIONS_REQUEST_REJECTED=4001;class ct extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,ct.prototype)}}G.PermissionsError=ct;Object.defineProperty(he,"__esModule",{value:!0});he.Wallet=void 0;const De=O,we=G;class Kd{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(De.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new we.PermissionsError("Permissions request is invalid",we.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(De.Methods.wallet_requestPermissions,t)).data}catch{throw new we.PermissionsError("Permissions rejected",we.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(De.RestrictedMethods).includes(s)):!1)}}he.Wallet=Kd;Object.defineProperty(it,"__esModule",{value:!0});const Jd=he,Tt=G,Ct=(e,t)=>t.some(n=>n.parentCapability===e),Yd=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const a=new Jd.Wallet(this.communicator);let r=await a.getPermissions();if(Ct(t,r)||(r=await a.requestPermissions([{[t]:{}}])),!Ct(t,r))throw new Tt.PermissionsError("Permissions rejected",Tt.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},n};it.default=Yd;var Qd=C&&C.__decorate||function(e,t,n,s){var a=arguments.length,r=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Xd=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Safe=void 0;const _e=$d,At=J,j=O,Rt=Z,Zd=Me,el=Xd(it);class js{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(j.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(j.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(j.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),a=(0,_e.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:Rt.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(j.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===At.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),a=(0,_e.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:Rt.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(j.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===At.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,_e.hashMessage)(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const a=Object.values(t.types),r=Object.keys(t.types).filter(o=>a.every(c=>c.every(({type:i})=>i.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,_e.hashTypedData)({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(j.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const a=this.calculateMessageHash(t);return await this.isMessageHashSigned(a,n)}),(0,Zd.isObjectEIP712TypedData)(t)&&(s=async()=>{const a=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(a,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of s)if(await a(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(j.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(j.Methods.requestAddressBook,void 0)).data}}Fe.Safe=js;Qd([(0,el.default)()],js.prototype,"requestAddressBook",null);var tl=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ve,"__esModule",{value:!0});const sl=tl(Os),nl=ke,al=Oe,rl=Fe,ol=he;class il{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new sl.default(n,s),this.eth=new al.Eth(this.communicator),this.txs=new nl.TXs(this.communicator),this.safe=new rl.Safe(this.communicator),this.wallet=new ol.Wallet(this.communicator)}}ve.default=il;(function(e){var t=C&&C.__createBinding||(Object.create?function(o,c,i,u){u===void 0&&(u=i);var l=Object.getOwnPropertyDescriptor(c,i);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[i]}}),Object.defineProperty(o,u,l)}:function(o,c,i,u){u===void 0&&(u=i),o[u]=c[i]}),n=C&&C.__exportStar||function(o,c){for(var i in o)i!=="default"&&!Object.prototype.hasOwnProperty.call(c,i)&&t(c,o,i)},s=C&&C.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const a=s(ve);e.default=a.default,n(ve,e),n(Me,e),n(O,e),n(le,e);var r=fe;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),n(Z,e)})(qs);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.numberToHex=Y.getLowerCase=void 0;function cl(e){return e&&e.toLowerCase()}Y.getLowerCase=cl;function ul(e){return`0x${e.toString(16)}`}Y.numberToHex=ul;Object.defineProperty(Re,"__esModule",{value:!0});Re.SafeAppProvider=void 0;const W=qs,dl=Cc,q=Y;class ll extends dl.EventEmitter{constructor(t,n){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var a,r,o,c;const{method:n,params:s=[]}=t;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,q.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=s,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(m);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const i={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof i.gas=="string"&&i.gas.startsWith("0x")&&(i.gas=parseInt(i.gas,16));const u=await this.sdk.txs.send({txs:[i],params:{safeTxGas:i.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:i.data,value:i.value,to:i.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,q.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let f=s[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=s[0]),h));case"eth_getTransactionReceipt":{let h=s[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=s[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=s[0];if(m!==(0,q.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const g=d.map((b,x)=>{if(!b.to)throw new Error(`Invalid call #${x}: missing "to" field`);return{to:b.to,data:b.data??"0x",value:b.value??(0,q.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:g});return{id:y}}case"wallet_getCallsStatus":{const h=s[0],d={[W.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[W.TransactionStatus.AWAITING_EXECUTION]:100,[W.TransactionStatus.SUCCESS]:200,[W.TransactionStatus.CANCELLED]:400,[W.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),g={version:"1.0",id:h,chainId:(0,q.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return g;const y=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!y)return g;const _=((r=(a=m.txData)==null?void 0:a.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(o=m.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:c.length)??1,b=Number(y.blockNumber),x=Number(y.gasUsed);return g.receipts=Array(_).fill({logs:y.logs,status:(0,q.numberToHex)(m.txStatus===W.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,q.numberToHex)(b),gasUsed:(0,q.numberToHex)(x),transactionHash:m.txHash}),g}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,q.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,n){t||n("Undefined request"),this.request(t).then(s=>n(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>n(s,null))}}Re.SafeAppProvider=ll;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Re;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(ot);const fl=Ac(ot),bl=Wc({__proto__:null,default:fl},[ot]);export{bl as i};
